import{_ as O}from"./logo-RMEbkNKP.js";import{z as P,e as L,b as D,A as v,B as Q,r as l,C as p,o as u,w as t,a as e,D as f,f as o,g as r,G as X,H as Y,I as Z,i as w,J as ee,m as te,h as ne,u as se,q as le,s as oe,c as S,K as z,F as ae,v as ue,L as re,M}from"./index-BsXkJmm5.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const de={__name:"SideBar",setup(T){const y=P(),d=L(y.path),s=D(),i=v(()=>s.platformAdmin||s.tenantSuperAdmin),A=v(()=>s.platformAdmin);Q(()=>y.path,g=>{d.value=g});const x=g=>{console.log("菜单选中:",g)};return(g,n)=>{const _=l("el-icon"),a=l("el-menu-item"),b=l("el-sub-menu"),k=l("el-menu");return u(),p(k,{"default-active":d.value,class:"el-menu-vertical",router:"",collapse:!1,onSelect:x},{default:t(()=>[e(a,{index:"/dashboard"},{default:t(()=>[e(_,null,{default:t(()=>[e(r(X))]),_:1}),n[0]||(n[0]=o("span",null,"工作台",-1))]),_:1,__:[0]}),r(s).platformAdmin?f("",!0):(u(),p(a,{key:0,index:"/knowledgelist"},{default:t(()=>[e(_,null,{default:t(()=>[e(r(Y))]),_:1}),n[1]||(n[1]=o("span",null,"知识库管理中心",-1))]),_:1,__:[1]})),r(s).platformAdmin?f("",!0):(u(),p(a,{key:1,index:"/service"},{default:t(()=>[e(_,null,{default:t(()=>[e(r(Z))]),_:1}),n[2]||(n[2]=o("span",null,"知识服务中心",-1))]),_:1,__:[2]})),i.value?(u(),p(b,{key:2,index:"system"},{title:t(()=>[e(_,null,{default:t(()=>[e(r(ee))]),_:1}),n[3]||(n[3]=o("span",null,"系统管理中心",-1))]),default:t(()=>[r(s).platformAdmin?f("",!0):(u(),p(a,{key:0,index:"/system/users"},{default:t(()=>n[4]||(n[4]=[w("用户管理")])),_:1,__:[4]})),e(a,{index:"/system/roles"},{default:t(()=>n[5]||(n[5]=[w("角色权限管理")])),_:1,__:[5]}),e(a,{index:"/system/settings"},{default:t(()=>n[6]||(n[6]=[w("系统参数")])),_:1,__:[6]}),e(a,{index:"/system/logs"},{default:t(()=>n[7]||(n[7]=[w("系统日志")])),_:1,__:[7]})]),_:1})):f("",!0),A.value?(u(),p(a,{key:3,index:"/tenant"},{default:t(()=>[e(_,null,{default:t(()=>[e(r(te))]),_:1}),n[8]||(n[8]=o("span",null,"租户管理中心",-1))]),_:1,__:[8]})):f("",!0),e(a,{index:"/profile"},{default:t(()=>[e(_,null,{default:t(()=>[e(r(ne))]),_:1}),n[9]||(n[9]=o("span",null,"个人中心",-1))]),_:1,__:[9]})]),_:1},8,["default-active"])}}},ie=E(de,[["__scopeId","data-v-40e66356"]]),_e={class:"header-content"},ce={class:"desktop-info"},me={key:0,class:"tenant"},pe={key:1,class:"roles"},fe={class:"user-info"},ve={class:"el-dropdown-link"},we={class:"username"},ge={__name:"DefaultLayout",setup(T){const y=se(),d=D(),s=L(!1),i=L(!1),A=v(()=>d.displayTenantName),x=v(()=>{const c=[];return d.platformAdmin&&c.push("平台管理员"),d.tenantSuperAdmin&&c.push("超级管理员"),c}),g=v(()=>d.user?.username||"用户"),n=v(()=>d.userAvatar),_=v(()=>i.value?s.value?"0px":"220px":s.value?"64px":"220px"),a=()=>{const c=i.value;i.value=window.innerWidth<=768,c&&!i.value?(s.value=!1,console.log("切换到桌面端，自动显示侧边栏")):!c&&i.value&&(s.value=!0,console.log("切换到移动端，自动隐藏侧边栏"))},b=()=>{s.value=!s.value},k=()=>{a()};let C=null;const h=async()=>{};le(()=>{a(),window.addEventListener("resize",k),C=setInterval(h,15*60*1e3),setTimeout(()=>{h()},1e3)}),oe(()=>{C&&clearInterval(C),window.removeEventListener("resize",k)});const V=async()=>{d.logout(),await y.push("/login")};return(c,m)=>{const F=l("el-button"),R=l("el-tag"),U=l("el-avatar"),$=l("el-icon"),I=l("el-dropdown-item"),W=l("el-dropdown-menu"),q=l("el-dropdown"),G=l("el-header"),H=l("el-aside"),J=l("router-view"),K=l("el-main"),N=l("el-container");return u(),p(N,{class:"main-container"},{default:t(()=>[e(G,{class:"top-header",height:"60px"},{default:t(()=>[o("div",_e,[m[3]||(m[3]=o("div",{class:"logo-container"},[o("img",{src:O,alt:"Logo",class:"logo"}),o("span",{class:"system-name"},"知识管理系统")],-1)),e(F,{class:"mobile-menu-btn",onClick:b,icon:s.value?"Expand":"Fold",circle:"",size:"small"},null,8,["icon"]),o("div",ce,[r(d).platformAdmin?f("",!0):(u(),S("div",me,"租户："+z(A.value),1)),x.value.length?(u(),S("div",pe,[(u(!0),S(ae,null,ue(x.value,(B,j)=>(u(),p(R,{key:j,size:"small",type:"info",class:"role-tag"},{default:t(()=>[w(z(B),1)]),_:2},1024))),128))])):f("",!0)]),o("div",fe,[e(q,null,{dropdown:t(()=>[e(W,null,{default:t(()=>[e(I,{onClick:m[0]||(m[0]=B=>c.$router.push("/profile"))},{default:t(()=>m[1]||(m[1]=[w("个人中心")])),_:1,__:[1]}),e(I,{onClick:V},{default:t(()=>m[2]||(m[2]=[w("退出登录")])),_:1,__:[2]})]),_:1})]),default:t(()=>[o("span",ve,[e(U,{size:30,src:n.value},null,8,["src"]),o("span",we,z(g.value),1),e($,null,{default:t(()=>[e(r(re))]),_:1})])]),_:1})])])]),_:1}),e(N,null,{default:t(()=>[e(H,{width:_.value,class:M(["aside-container",{"sidebar-collapsed":s.value}])},{default:t(()=>[e(ie)]),_:1},8,["width","class"]),e(K,{class:M(["main-content",{"content-expanded":s.value}])},{default:t(()=>[e(J)]),_:1},8,["class"])]),_:1}),!s.value&&i.value?(u(),S("div",{key:0,class:"sidebar-overlay",onClick:b})):f("",!0)]),_:1})}}},ke=E(ge,[["__scopeId","data-v-4d46eb01"]]);export{ke as default};
