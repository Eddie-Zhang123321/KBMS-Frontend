import{e as K,q as Wt,a0 as Yt,B as Ft,r as ve,c as Xt,o as $t,a as G,w as z,f as T,K as Oe,g as fe,L as qt,i as Ve,m as Ht,aG as Zt,aH as jt,J as Jt}from"./index-BsXkJmm5.js";import{_ as Kt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as X,D as tt,r as at,a as St,d as Qt,S as rt,b as nt,l as Be,_ as J,c as wt,e as ie,f as ke,i as ea,g as $e,h as it,j as Ie,k as be,m as _t,p as ta,t as aa,n as ee,u as te,s as xt,o as ra,q as Ye,G as Fe,v as na,w as qe,C as He,x as Dt,y as ce,R as Lt,z as j,A as Pt,B as Mt,E as ia,F as Ct,H as Pe,I as Me,J as sa,K as la,L as Ze,M as oa,N as va,O as ca,Q as Tt,T as kt,U as ae,V as ua,W as U,X as ga,Z as me,Y as ha,$ as da,a0 as fa,a1 as st,a2 as pa,a3 as ma,a4 as ya,a5 as ba,a6 as lt,a7 as Aa,a8 as Se,a9 as ot,aa as Sa,ab as vt,ac as wa,ad as _a,ae as xa,af as Da,ag as La,ah as Pa,ai as Ma,aj as Ca,ak as Ta,al as pe}from"./installCanvasRenderer-CdsqtIo3.js";import{i as ka}from"./install-Bmjs6081.js";function It(r,a,t,e,n,s,i,l){var v=n-r,c=s-a,o=t-r,u=e-a,f=Math.sqrt(o*o+u*u);o/=f,u/=f;var d=v*o+c*u,g=d/f;g*=f;var y=i[0]=r+g*o,p=i[1]=a+g*u;return Math.sqrt((y-n)*(y-n)+(p-s)*(p-s))}var re=new X,Y=new X,F=new X,ne=new X,Q=new X,Ce=[],$=new X;function Ia(r,a){if(a<=180&&a>0){a=a/180*Math.PI,re.fromArray(r[0]),Y.fromArray(r[1]),F.fromArray(r[2]),X.sub(ne,re,Y),X.sub(Q,F,Y);var t=ne.len(),e=Q.len();if(!(t<.001||e<.001)){ne.scale(1/t),Q.scale(1/e);var n=ne.dot(Q),s=Math.cos(a);if(s<n){var i=It(Y.x,Y.y,F.x,F.y,re.x,re.y,Ce);$.fromArray(Ce),$.scaleAndAdd(Q,i/Math.tan(Math.PI-a));var l=F.x!==Y.x?($.x-Y.x)/(F.x-Y.x):($.y-Y.y)/(F.y-Y.y);if(isNaN(l))return;l<0?X.copy($,Y):l>1&&X.copy($,F),$.toArray(r[1])}}}}function Na(r,a,t){if(t<=180&&t>0){t=t/180*Math.PI,re.fromArray(r[0]),Y.fromArray(r[1]),F.fromArray(r[2]),X.sub(ne,Y,re),X.sub(Q,F,Y);var e=ne.len(),n=Q.len();if(!(e<.001||n<.001)){ne.scale(1/e),Q.scale(1/n);var s=ne.dot(a),i=Math.cos(t);if(s<i){var l=It(Y.x,Y.y,F.x,F.y,re.x,re.y,Ce);$.fromArray(Ce);var v=Math.PI/2,c=Math.acos(Q.dot(a)),o=v+c-t;if(o>=v)X.copy($,F);else{$.scaleAndAdd(Q,l/Math.tan(Math.PI/2-o));var u=F.x!==Y.x?($.x-Y.x)/(F.x-Y.x):($.y-Y.y)/(F.y-Y.y);if(isNaN(u))return;u<0?X.copy($,Y):u>1&&X.copy($,F)}$.toArray(r[1])}}}}function Ge(r,a,t,e){var n=t==="normal",s=n?r:r.ensureState(t);s.ignore=a;var i=e.get("smooth");i&&i===!0&&(i=.3),s.shape=s.shape||{},i>0&&(s.shape.smooth=i);var l=e.getModel("lineStyle").getLineStyle();n?r.useStyle(l):s.style=l}function Ra(r,a){var t=a.smooth,e=a.points;if(e)if(r.moveTo(e[0][0],e[0][1]),t>0&&e.length>=3){var n=nt(e[0],e[1]),s=nt(e[1],e[2]);if(!n||!s){r.lineTo(e[1][0],e[1][1]),r.lineTo(e[2][0],e[2][1]);return}var i=Math.min(n,s)*t,l=Be([],e[1],e[0],i/n),v=Be([],e[1],e[2],i/s),c=Be([],l,v,.5);r.bezierCurveTo(l[0],l[1],l[0],l[1],c[0],c[1]),r.bezierCurveTo(v[0],v[1],v[0],v[1],e[2][0],e[2][1])}else for(var o=1;o<e.length;o++)r.lineTo(e[o][0],e[o][1])}function Ea(r,a,t){var e=r.getTextGuideLine(),n=r.getTextContent();if(!n){e&&r.removeTextGuideLine();return}for(var s=a.normal,i=s.get("show"),l=n.ignore,v=0;v<tt.length;v++){var c=tt[v],o=a[c],u=c==="normal";if(o){var f=o.get("show"),d=u?l:at(n.states[c]&&n.states[c].ignore,l);if(d||!at(f,i)){var g=u?e:e&&e.states[c];g&&(g.ignore=!0),e&&Ge(e,!0,c,o);continue}e||(e=new St,r.setTextGuideLine(e),!u&&(l||!i)&&Ge(e,!0,"normal",a.normal),r.stateProxy&&(e.stateProxy=r.stateProxy)),Ge(e,!1,c,o)}}if(e){Qt(e.style,t),e.style.fill=null;var y=s.get("showAbove"),p=r.textGuideLineConfig=r.textGuideLineConfig||{};p.showAbove=y||!1,e.buildPath=Ra}}function Oa(r,a){a=a||"labelLine";for(var t={normal:r.getModel(a)},e=0;e<rt.length;e++){var n=rt[e];t[n]=r.getModel([n,a])}return t}var Xe=function(r){J(a,r);function a(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.getInitialData=function(t,e){return wt(null,this,{useEncodeDefaulter:!0})},a.prototype.getMarkerPosition=function(t,e,n){var s=this.coordinateSystem;if(s&&s.clampData){var i=s.clampData(t),l=s.dataToPoint(i);if(n)ie(s.getAxes(),function(f,d){if(f.type==="category"&&e!=null){var g=f.getTicksCoords(),y=f.getTickModel().get("alignWithLabel"),p=i[d],h=e[d]==="x1"||e[d]==="y1";if(h&&!y&&(p+=1),g.length<2)return;if(g.length===2){l[d]=f.toGlobalCoord(f.getExtent()[h?1:0]);return}for(var m=void 0,b=void 0,A=1,w=0;w<g.length;w++){var P=g[w].coord,L=w===g.length-1?g[w-1].tickValue+A:g[w].tickValue;if(L===p){b=P;break}else if(L<p)m=P;else if(m!=null&&L>p){b=(P+m)/2;break}w===1&&(A=L-g[0].tickValue)}b==null&&(m?m&&(b=g[g.length-1].coord):b=g[0].coord),l[d]=f.toGlobalCoord(b)}});else{var v=this.getData(),c=v.getLayout("offset"),o=v.getLayout("size"),u=s.getBaseAxis().isHorizontal()?0:1;l[u]+=c+o/2}return l}return[NaN,NaN]},a.type="series.__base_bar__",a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},a}(ke);ke.registerClass(Xe);var Va=function(r){J(a,r);function a(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.getInitialData=function(){return wt(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},a.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},a.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},a.prototype.brushSelector=function(t,e,n){return n.rect(e.getItemLayout(t))},a.type="series.bar",a.dependencies=["grid","polar"],a.defaultOption=ea(Xe.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),a}(Xe),Ba=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),Te=function(r){J(a,r);function a(t){var e=r.call(this,t)||this;return e.type="sausage",e}return a.prototype.getDefaultShape=function(){return new Ba},a.prototype.buildPath=function(t,e){var n=e.cx,s=e.cy,i=Math.max(e.r0||0,0),l=Math.max(e.r,0),v=(l-i)*.5,c=i+v,o=e.startAngle,u=e.endAngle,f=e.clockwise,d=Math.PI*2,g=f?u-o<d:o-u<d;g||(o=u-(f?d:-d));var y=Math.cos(o),p=Math.sin(o),h=Math.cos(u),m=Math.sin(u);g?(t.moveTo(y*i+n,p*i+s),t.arc(y*c+n,p*c+s,v,-Math.PI+o,o,!f)):t.moveTo(y*l+n,p*l+s),t.arc(n,s,l,o,u,!f),t.arc(h*c+n,m*c+s,v,u-Math.PI*2,u-Math.PI,!f),i!==0&&t.arc(n,s,i,u,o,f)},a}($e);function Ga(r,a){a=a||{};var t=a.isRoundCap;return function(e,n,s){var i=n.position;if(!i||i instanceof Array)return it(e,n,s);var l=r(i),v=n.distance!=null?n.distance:5,c=this.shape,o=c.cx,u=c.cy,f=c.r,d=c.r0,g=(f+d)/2,y=c.startAngle,p=c.endAngle,h=(y+p)/2,m=t?Math.abs(f-d)/2:0,b=Math.cos,A=Math.sin,w=o+f*b(y),P=u+f*A(y),L="left",S="top";switch(l){case"startArc":w=o+(d-v)*b(h),P=u+(d-v)*A(h),L="center",S="top";break;case"insideStartArc":w=o+(d+v)*b(h),P=u+(d+v)*A(h),L="center",S="bottom";break;case"startAngle":w=o+g*b(y)+we(y,v+m,!1),P=u+g*A(y)+_e(y,v+m,!1),L="right",S="middle";break;case"insideStartAngle":w=o+g*b(y)+we(y,-v+m,!1),P=u+g*A(y)+_e(y,-v+m,!1),L="left",S="middle";break;case"middle":w=o+g*b(h),P=u+g*A(h),L="center",S="middle";break;case"endArc":w=o+(f+v)*b(h),P=u+(f+v)*A(h),L="center",S="bottom";break;case"insideEndArc":w=o+(f-v)*b(h),P=u+(f-v)*A(h),L="center",S="top";break;case"endAngle":w=o+g*b(p)+we(p,v+m,!0),P=u+g*A(p)+_e(p,v+m,!0),L="left",S="middle";break;case"insideEndAngle":w=o+g*b(p)+we(p,-v+m,!0),P=u+g*A(p)+_e(p,-v+m,!0),L="right",S="middle";break;default:return it(e,n,s)}return e=e||{},e.x=w,e.y=P,e.align=L,e.verticalAlign=S,e}}function za(r,a,t,e){if(Ie(e)){r.setTextConfig({rotation:e});return}else if(be(a)){r.setTextConfig({rotation:0});return}var n=r.shape,s=n.clockwise?n.startAngle:n.endAngle,i=n.clockwise?n.endAngle:n.startAngle,l=(s+i)/2,v,c=t(a);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":v=l;break;case"startAngle":case"insideStartAngle":v=s;break;case"endAngle":case"insideEndAngle":v=i;break;default:r.setTextConfig({rotation:0});return}var o=Math.PI*1.5-v;c==="middle"&&o>Math.PI/2&&o<Math.PI*1.5&&(o-=Math.PI),r.setTextConfig({rotation:o})}function we(r,a,t){return a*Math.sin(r)*(t?-1:1)}function _e(r,a,t){return a*Math.cos(r)*(t?1:-1)}function ye(r,a,t){var e=r.get("borderRadius");if(e==null)return t?{cornerRadius:0}:null;be(e)||(e=[e,e,e,e]);var n=Math.abs(a.r||0-a.r0||0);return{cornerRadius:_t(e,function(s){return ta(s,n)})}}var ze=Math.max,Ue=Math.min;function Ua(r,a){var t=r.getArea&&r.getArea();if(Dt(r,"cartesian2d")){var e=r.getBaseAxis();if(e.type!=="category"||!e.onBand){var n=a.getLayout("bandWidth");e.isHorizontal()?(t.x-=n,t.width+=n*2):(t.y-=n,t.height+=n*2)}}return t}var Wa=function(r){J(a,r);function a(){var t=r.call(this)||this;return t.type=a.type,t._isFirstFrame=!0,t}return a.prototype.render=function(t,e,n,s){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var i=t.get("coordinateSystem");(i==="cartesian2d"||i==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n,s))},a.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},a.prototype.incrementalRender=function(t,e){this._progressiveEls=[],this._incrementalRenderLarge(t,e)},a.prototype.eachRendered=function(t){aa(this._progressiveEls||this.group,t)},a.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;(this._isLargeDraw==null||e!==this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},a.prototype._renderNormal=function(t,e,n,s){var i=this.group,l=t.getData(),v=this._data,c=t.coordinateSystem,o=c.getBaseAxis(),u;c.type==="cartesian2d"?u=o.isHorizontal():c.type==="polar"&&(u=o.dim==="angle");var f=t.isAnimationEnabled()?t:null,d=Ya(t,c);d&&this._enableRealtimeSort(d,l,n);var g=t.get("clip",!0)||d,y=Ua(c,l);i.removeClipPath();var p=t.get("roundCap",!0),h=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),b=m.get("borderRadius")||0,A=[],w=this._backgroundEls,P=s&&s.isInitSort,L=s&&s.type==="changeAxisOrder";function S(x){var I=xe[c.type](l,x),M=ja(c,u,I);return M.useStyle(m.getItemStyle()),c.type==="cartesian2d"?M.setShape("r",b):M.setShape("cornerRadius",b),A[x]=M,M}l.diff(v).add(function(x){var I=l.getItemModel(x),M=xe[c.type](l,x,I);if(h&&S(x),!(!l.hasValue(x)||!dt[c.type](M))){var k=!1;g&&(k=ct[c.type](y,M));var D=ut[c.type](t,l,x,M,u,f,o.model,!1,p);d&&(D.forceLabelAnimation=!0),ft(D,l,x,I,M,t,u,c.type==="polar"),P?D.attr({shape:M}):d?gt(d,f,D,M,x,u,!1,!1):ee(D,{shape:M},t,x),l.setItemGraphicEl(x,D),i.add(D),D.ignore=k}}).update(function(x,I){var M=l.getItemModel(x),k=xe[c.type](l,x,M);if(h){var D=void 0;w.length===0?D=S(I):(D=w[I],D.useStyle(m.getItemStyle()),c.type==="cartesian2d"?D.setShape("r",b):D.setShape("cornerRadius",b),A[x]=D);var R=xe[c.type](l,x),N=Rt(u,R,c);te(D,{shape:N},f,x)}var C=v.getItemGraphicEl(I);if(!l.hasValue(x)||!dt[c.type](k)){i.remove(C);return}var O=!1;if(g&&(O=ct[c.type](y,k),O&&i.remove(C)),C?xt(C):C=ut[c.type](t,l,x,k,u,f,o.model,!!C,p),d&&(C.forceLabelAnimation=!0),L){var V=C.getTextContent();if(V){var B=ra(V);B.prevValue!=null&&(B.prevValue=B.value)}}else ft(C,l,x,M,k,t,u,c.type==="polar");P?C.attr({shape:k}):d?gt(d,f,C,k,x,u,!0,L):te(C,{shape:k},t,x,null),l.setItemGraphicEl(x,C),C.ignore=O,i.add(C)}).remove(function(x){var I=v.getItemGraphicEl(x);I&&Ye(I,t,x)}).execute();var E=this._backgroundGroup||(this._backgroundGroup=new Fe);E.removeAll();for(var _=0;_<A.length;++_)E.add(A[_]);i.add(E),this._backgroundEls=A,this._data=l},a.prototype._renderLarge=function(t,e,n){this._clear(),mt(t,this.group),this._updateLargeClip(t)},a.prototype._incrementalRenderLarge=function(t,e){this._removeBackground(),mt(e,this.group,this._progressiveEls,!0)},a.prototype._updateLargeClip=function(t){var e=t.get("clip",!0)&&na(t.coordinateSystem,!1,t),n=this.group;e?n.setClipPath(e):n.removeClipPath()},a.prototype._enableRealtimeSort=function(t,e,n){var s=this;if(e.count()){var i=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,t,n),this._isFirstFrame=!1;else{var l=function(v){var c=e.getItemGraphicEl(v),o=c&&c.shape;return o&&Math.abs(i.isHorizontal()?o.height:o.width)||0};this._onRendered=function(){s._updateSortWithinSameData(e,l,i,n)},n.getZr().on("rendered",this._onRendered)}}},a.prototype._dataSort=function(t,e,n){var s=[];return t.each(t.mapDimension(e.dim),function(i,l){var v=n(l);v=v??NaN,s.push({dataIndex:l,mappedValue:v,ordinalNumber:i})}),s.sort(function(i,l){return l.mappedValue-i.mappedValue}),{ordinalNumbers:_t(s,function(i){return i.ordinalNumber})}},a.prototype._isOrderChangedWithinSameData=function(t,e,n){for(var s=n.scale,i=t.mapDimension(n.dim),l=Number.MAX_VALUE,v=0,c=s.getOrdinalMeta().categories.length;v<c;++v){var o=t.rawIndexOf(i,s.getRawOrdinalNumber(v)),u=o<0?Number.MIN_VALUE:e(t.indexOfRawIndex(o));if(u>l)return!0;l=u}return!1},a.prototype._isOrderDifferentInView=function(t,e){for(var n=e.scale,s=n.getExtent(),i=Math.max(0,s[0]),l=Math.min(s[1],n.getOrdinalMeta().categories.length-1);i<=l;++i)if(t.ordinalNumbers[i]!==n.getRawOrdinalNumber(i))return!0},a.prototype._updateSortWithinSameData=function(t,e,n,s){if(this._isOrderChangedWithinSameData(t,e,n)){var i=this._dataSort(t,n,e);this._isOrderDifferentInView(i,n)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:i}))}},a.prototype._dispatchInitSort=function(t,e,n){var s=e.baseAxis,i=this._dataSort(t,s,function(l){return t.get(t.mapDimension(e.otherAxis.dim),l)});n.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:i})},a.prototype.remove=function(t,e){this._clear(this._model),this._removeOnRenderedListener(e)},a.prototype.dispose=function(t,e){this._removeOnRenderedListener(e)},a.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},a.prototype._clear=function(t){var e=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(s){Ye(s,t,qe(s).dataIndex)})):e.removeAll(),this._data=null,this._isFirstFrame=!0},a.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},a.type="bar",a}(He),ct={cartesian2d:function(r,a){var t=a.width<0?-1:1,e=a.height<0?-1:1;t<0&&(a.x+=a.width,a.width=-a.width),e<0&&(a.y+=a.height,a.height=-a.height);var n=r.x+r.width,s=r.y+r.height,i=ze(a.x,r.x),l=Ue(a.x+a.width,n),v=ze(a.y,r.y),c=Ue(a.y+a.height,s),o=l<i,u=c<v;return a.x=o&&i>n?l:i,a.y=u&&v>s?c:v,a.width=o?0:l-i,a.height=u?0:c-v,t<0&&(a.x+=a.width,a.width=-a.width),e<0&&(a.y+=a.height,a.height=-a.height),o||u},polar:function(r,a){var t=a.r0<=a.r?1:-1;if(t<0){var e=a.r;a.r=a.r0,a.r0=e}var n=Ue(a.r,r.r),s=ze(a.r0,r.r0);a.r=n,a.r0=s;var i=n-s<0;if(t<0){var e=a.r;a.r=a.r0,a.r0=e}return i}},ut={cartesian2d:function(r,a,t,e,n,s,i,l,v){var c=new Lt({shape:j({},e),z2:1});if(c.__dataIndex=t,c.name="item",s){var o=c.shape,u=n?"height":"width";o[u]=0}return c},polar:function(r,a,t,e,n,s,i,l,v){var c=!n&&v?Te:ce,o=new c({shape:e,z2:1});o.name="item";var u=Nt(n);if(o.calculateTextPosition=Ga(u,{isRoundCap:c===Te}),s){var f=o.shape,d=n?"r":"endAngle",g={};f[d]=n?e.r0:e.startAngle,g[d]=e[d],(l?te:ee)(o,{shape:g},s)}return o}};function Ya(r,a){var t=r.get("realtimeSort",!0),e=a.getBaseAxis();if(t&&e.type==="category"&&a.type==="cartesian2d")return{baseAxis:e,otherAxis:a.getOtherAxis(e)}}function gt(r,a,t,e,n,s,i,l){var v,c;s?(c={x:e.x,width:e.width},v={y:e.y,height:e.height}):(c={y:e.y,height:e.height},v={x:e.x,width:e.width}),l||(i?te:ee)(t,{shape:v},a,n,null);var o=a?r.baseAxis.model:null;(i?te:ee)(t,{shape:c},o,n)}function ht(r,a){for(var t=0;t<a.length;t++)if(!isFinite(r[a[t]]))return!0;return!1}var Fa=["x","y","width","height"],Xa=["cx","cy","r","startAngle","endAngle"],dt={cartesian2d:function(r){return!ht(r,Fa)},polar:function(r){return!ht(r,Xa)}},xe={cartesian2d:function(r,a,t){var e=r.getItemLayout(a),n=t?qa(t,e):0,s=e.width>0?1:-1,i=e.height>0?1:-1;return{x:e.x+s*n/2,y:e.y+i*n/2,width:e.width-s*n,height:e.height-i*n}},polar:function(r,a,t){var e=r.getItemLayout(a);return{cx:e.cx,cy:e.cy,r0:e.r0,r:e.r,startAngle:e.startAngle,endAngle:e.endAngle,clockwise:e.clockwise}}};function $a(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function Nt(r){return function(a){var t=a?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(r)}function ft(r,a,t,e,n,s,i,l){var v=a.getItemVisual(t,"style");if(l){if(!s.get("roundCap")){var o=r.shape,u=ye(e.getModel("itemStyle"),o,!0);j(o,u),r.setShape(o)}}else{var c=e.get(["itemStyle","borderRadius"])||0;r.setShape("r",c)}r.useStyle(v);var f=e.getShallow("cursor");f&&r.attr("cursor",f);var d=l?i?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":i?n.height>=0?"bottom":"top":n.width>=0?"right":"left",g=Pt(e);Mt(r,g,{labelFetcher:s,labelDataIndex:t,defaultText:ia(s.getData(),t),inheritColor:v.fill,defaultOpacity:v.opacity,defaultOutsidePosition:d});var y=r.getTextContent();if(l&&y){var p=e.get(["label","position"]);r.textConfig.inside=p==="middle"?!0:null,za(r,p==="outside"?d:p,Nt(i),e.get(["label","rotate"]))}Ct(y,g,s.getRawValue(t),function(m){return la(a,m)});var h=e.getModel(["emphasis"]);Pe(r,h.get("focus"),h.get("blurScope"),h.get("disabled")),Me(r,e),$a(n)&&(r.style.fill="none",r.style.stroke="none",ie(r.states,function(m){m.style&&(m.style.fill=m.style.stroke="none")}))}function qa(r,a){var t=r.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var e=r.get(["itemStyle","borderWidth"])||0,n=isNaN(a.width)?Number.MAX_VALUE:Math.abs(a.width),s=isNaN(a.height)?Number.MAX_VALUE:Math.abs(a.height);return Math.min(e,n,s)}var Ha=function(){function r(){}return r}(),pt=function(r){J(a,r);function a(t){var e=r.call(this,t)||this;return e.type="largeBar",e}return a.prototype.getDefaultShape=function(){return new Ha},a.prototype.buildPath=function(t,e){for(var n=e.points,s=this.baseDimIdx,i=1-this.baseDimIdx,l=[],v=[],c=this.barWidth,o=0;o<n.length;o+=3)v[s]=c,v[i]=n[o+2],l[s]=n[o+s],l[i]=n[o+i],t.rect(l[0],l[1],v[0],v[1])},a}($e);function mt(r,a,t,e){var n=r.getData(),s=n.getLayout("valueAxisHorizontal")?1:0,i=n.getLayout("largeDataIndices"),l=n.getLayout("size"),v=r.getModel("backgroundStyle"),c=n.getLayout("largeBackgroundPoints");if(c){var o=new pt({shape:{points:c},incremental:!!e,silent:!0,z2:0});o.baseDimIdx=s,o.largeDataIndices=i,o.barWidth=l,o.useStyle(v.getItemStyle()),a.add(o),t&&t.push(o)}var u=new pt({shape:{points:n.getLayout("largePoints")},incremental:!!e,ignoreCoarsePointer:!0,z2:1});u.baseDimIdx=s,u.largeDataIndices=i,u.barWidth=l,a.add(u),u.useStyle(n.getVisual("style")),u.style.stroke=null,qe(u).seriesIndex=r.seriesIndex,r.get("silent")||(u.on("mousedown",yt),u.on("mousemove",yt)),t&&t.push(u)}var yt=sa(function(r){var a=this,t=Za(a,r.offsetX,r.offsetY);qe(a).dataIndex=t>=0?t:null},30,!1);function Za(r,a,t){for(var e=r.baseDimIdx,n=1-e,s=r.shape.points,i=r.largeDataIndices,l=[],v=[],c=r.barWidth,o=0,u=s.length/3;o<u;o++){var f=o*3;if(v[e]=c,v[n]=s[f+2],l[e]=s[f+e],l[n]=s[f+n],v[n]<0&&(l[n]+=v[n],v[n]=-v[n]),a>=l[0]&&a<=l[0]+v[0]&&t>=l[1]&&t<=l[1]+v[1])return i[o]}return-1}function Rt(r,a,t){if(Dt(t,"cartesian2d")){var e=a,n=t.getArea();return{x:r?e.x:n.x,y:r?n.y:e.y,width:r?e.width:n.width,height:r?n.height:e.height}}else{var n=t.getArea(),s=a;return{cx:n.cx,cy:n.cy,r0:r?n.r0:s.r0,r:r?n.r:s.r,startAngle:r?s.startAngle:0,endAngle:r?s.endAngle:Math.PI*2}}}function ja(r,a,t){var e=r.type==="polar"?ce:Lt;return new e({shape:Rt(a,t,r),silent:!0,z2:0})}function Ja(r){r.registerChartView(Wa),r.registerSeriesModel(Va),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,Ze(oa,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,va("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,ca("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(a,t){var e=a.componentType||"series";t.eachComponent({mainType:e,query:a},function(n){a.sortInfo&&n.axis.setCategorySortInfo(a.sortInfo)})})}var bt=Math.PI*2,De=Math.PI/180;function Et(r,a){return ua(r.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function Ot(r,a){var t=Et(r,a),e=r.get("center"),n=r.get("radius");be(n)||(n=[0,n]);var s=U(t.width,a.getWidth()),i=U(t.height,a.getHeight()),l=Math.min(s,i),v=U(n[0],l/2),c=U(n[1],l/2),o,u,f=r.coordinateSystem;if(f){var d=f.dataToPoint(e);o=d[0]||0,u=d[1]||0}else be(e)||(e=[e,e]),o=U(e[0],s)+t.x,u=U(e[1],i)+t.y;return{cx:o,cy:u,r0:v,r:c}}function Ka(r,a,t){a.eachSeriesByType(r,function(e){var n=e.getData(),s=n.mapDimension("value"),i=Et(e,t),l=Ot(e,t),v=l.cx,c=l.cy,o=l.r,u=l.r0,f=-e.get("startAngle")*De,d=e.get("endAngle"),g=e.get("padAngle")*De;d=d==="auto"?f-bt:-d*De;var y=e.get("minAngle")*De,p=y+g,h=0;n.each(s,function(N){!isNaN(N)&&h++});var m=n.getSum(s),b=Math.PI/(m||h)*2,A=e.get("clockwise"),w=e.get("roseType"),P=e.get("stillShowZeroSum"),L=n.getDataExtent(s);L[0]=0;var S=A?1:-1,E=[f,d],_=S*g/2;Tt(E,!A),f=E[0],d=E[1];var x=Vt(e);x.startAngle=f,x.endAngle=d,x.clockwise=A;var I=Math.abs(d-f),M=I,k=0,D=f;if(n.setLayout({viewRect:i,r:o}),n.each(s,function(N,C){var O;if(isNaN(N)){n.setItemLayout(C,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:A,cx:v,cy:c,r0:u,r:w?NaN:o});return}w!=="area"?O=m===0&&P?b:N*b:O=I/h,O<p?(O=p,M-=p):k+=N;var V=D+S*O,B=0,W=0;g>O?(B=D+S*O/2,W=B):(B=D+_,W=V-_),n.setItemLayout(C,{angle:O,startAngle:B,endAngle:W,clockwise:A,cx:v,cy:c,r0:u,r:w?ae(N,L,[u,o]):o}),D=V}),M<bt&&h)if(M<=.001){var R=I/h;n.each(s,function(N,C){if(!isNaN(N)){var O=n.getItemLayout(C);O.angle=R;var V=0,B=0;R<g?(V=f+S*(C+1/2)*R,B=V):(V=f+S*C*R+_,B=f+S*(C+1)*R-_),O.startAngle=V,O.endAngle=B}})}else b=M/k,D=f,n.each(s,function(N,C){if(!isNaN(N)){var O=n.getItemLayout(C),V=O.angle===p?p:N*b,B=0,W=0;V<g?(B=D+S*V/2,W=B):(B=D+_,W=D+S*V-_),O.startAngle=B,O.endAngle=W,D+=S*V}})})}var Vt=kt();function Qa(r){return{seriesType:r,reset:function(a,t){var e=t.findComponents({mainType:"legend"});if(!(!e||!e.length)){var n=a.getData();n.filterSelf(function(s){for(var i=n.getName(s),l=0;l<e.length;l++)if(!e[l].isSelected(i))return!1;return!0})}}}}var er=Math.PI/180;function At(r,a,t,e,n,s,i,l,v,c){if(r.length<2)return;function o(y){for(var p=y.rB,h=p*p,m=0;m<y.list.length;m++){var b=y.list[m],A=Math.abs(b.label.y-t),w=e+b.len,P=w*w,L=Math.sqrt(Math.abs((1-A*A/h)*P)),S=a+(L+b.len2)*n,E=S-b.label.x,_=b.targetTextWidth-E*n;Bt(b,_,!0),b.label.x=S}}function u(y){for(var p={list:[],maxY:0},h={list:[],maxY:0},m=0;m<y.length;m++)if(y[m].labelAlignTo==="none"){var b=y[m],A=b.label.y>t?h:p,w=Math.abs(b.label.y-t);if(w>=A.maxY){var P=b.label.x-a-b.len2*n,L=e+b.len,S=Math.abs(P)<L?Math.sqrt(w*w/(1-P*P/L/L)):L;A.rB=S,A.maxY=w}A.list.push(b)}o(p),o(h)}for(var f=r.length,d=0;d<f;d++)if(r[d].position==="outer"&&r[d].labelAlignTo==="labelLine"){var g=r[d].label.x-c;r[d].linePoints[1][0]+=g,r[d].label.x=c}ga(r,v,v+i)&&u(r)}function tr(r,a,t,e,n,s,i,l){for(var v=[],c=[],o=Number.MAX_VALUE,u=-Number.MAX_VALUE,f=0;f<r.length;f++){var d=r[f].label;We(r[f])||(d.x<a?(o=Math.min(o,d.x),v.push(r[f])):(u=Math.max(u,d.x),c.push(r[f])))}for(var f=0;f<r.length;f++){var g=r[f];if(!We(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var d=g.label,y=g.linePoints,p=void 0;g.labelAlignTo==="edge"?d.x<a?p=y[2][0]-g.labelDistance-i-g.edgeDistance:p=i+n-g.edgeDistance-y[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?d.x<a?p=o-i-g.bleedMargin:p=i+n-u-g.bleedMargin:d.x<a?p=d.x-i-g.bleedMargin:p=i+n-d.x-g.bleedMargin,g.targetTextWidth=p,Bt(g,p)}}At(c,a,t,e,1,n,s,i,l,u),At(v,a,t,e,-1,n,s,i,l,o);for(var f=0;f<r.length;f++){var g=r[f];if(!We(g)&&g.linePoints){var d=g.label,y=g.linePoints,h=g.labelAlignTo==="edge",m=d.style.padding,b=m?m[1]+m[3]:0,A=d.style.backgroundColor?0:b,w=g.rect.width+A,P=y[1][0]-y[2][0];h?d.x<a?y[2][0]=i+g.edgeDistance+w+g.labelDistance:y[2][0]=i+n-g.edgeDistance-w-g.labelDistance:(d.x<a?y[2][0]=d.x+g.labelDistance:y[2][0]=d.x-g.labelDistance,y[1][0]=y[2][0]+P),y[1][1]=y[2][1]=d.y}}}function Bt(r,a,t){if(t===void 0&&(t=!1),r.labelStyleWidth==null){var e=r.label,n=e.style,s=r.rect,i=n.backgroundColor,l=n.padding,v=l?l[1]+l[3]:0,c=n.overflow,o=s.width+(i?0:v);if(a<o||t){var u=s.height;if(c&&c.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",a-v);var f=e.getBoundingRect();e.setStyle("width",Math.ceil(f.width)),e.setStyle("backgroundColor",i)}else{var d=a-v,g=a<o?d:t?d>r.unconstrainedWidth?null:d:null;e.setStyle("width",g)}var y=e.getBoundingRect();s.width=y.width;var p=(e.style.margin||0)+2.1;s.height=y.height+p,s.y-=(s.height-u)/2}}}function We(r){return r.position==="center"}function ar(r){var a=r.getData(),t=[],e,n,s=!1,i=(r.get("minShowLabelAngle")||0)*er,l=a.getLayout("viewRect"),v=a.getLayout("r"),c=l.width,o=l.x,u=l.y,f=l.height;function d(P){P.ignore=!0}function g(P){if(!P.ignore)return!0;for(var L in P.states)if(P.states[L].ignore===!1)return!0;return!1}a.each(function(P){var L=a.getItemGraphicEl(P),S=L.shape,E=L.getTextContent(),_=L.getTextGuideLine(),x=a.getItemModel(P),I=x.getModel("label"),M=I.get("position")||x.get(["emphasis","label","position"]),k=I.get("distanceToLabelLine"),D=I.get("alignTo"),R=U(I.get("edgeDistance"),c),N=I.get("bleedMargin"),C=x.getModel("labelLine"),O=C.get("length");O=U(O,c);var V=C.get("length2");if(V=U(V,c),Math.abs(S.endAngle-S.startAngle)<i){ie(E.states,d),E.ignore=!0,_&&(ie(_.states,d),_.ignore=!0);return}if(g(E)){var B=(S.startAngle+S.endAngle)/2,W=Math.cos(B),H=Math.sin(B),q,Z,ue,Ae;e=S.cx,n=S.cy;var se=M==="inside"||M==="inner";if(M==="center")q=S.cx,Z=S.cy,Ae="center";else{var Ne=(se?(S.r+S.r0)/2*W:S.r*W)+e,Re=(se?(S.r+S.r0)/2*H:S.r*H)+n;if(q=Ne+W*3,Z=Re+H*3,!se){var je=Ne+W*(O+v-S.r),Je=Re+H*(O+v-S.r),Ke=je+(W<0?-1:1)*V,Qe=Je;D==="edge"?q=W<0?o+R:o+c-R:q=Ke+(W<0?-k:k),Z=Qe,ue=[[Ne,Re],[je,Je],[Ke,Qe]]}Ae=se?"center":D==="edge"?W>0?"right":"left":W>0?"left":"right"}var ge=Math.PI,le=0,he=I.get("rotate");if(Ie(he))le=he*(ge/180);else if(M==="center")le=0;else if(he==="radial"||he===!0){var zt=W<0?-B+ge:-B;le=zt}else if(he==="tangential"&&M!=="outside"&&M!=="outer"){var oe=Math.atan2(W,H);oe<0&&(oe=ge*2+oe);var Ut=H>0;Ut&&(oe=ge+oe),le=oe-ge}if(s=!!le,E.x=q,E.y=Z,E.rotation=le,E.setStyle({verticalAlign:"middle"}),se){E.setStyle({align:Ae});var Ee=E.states.select;Ee&&(Ee.x+=E.x,Ee.y+=E.y)}else{var de=E.getBoundingRect().clone();de.applyTransform(E.getComputedTransform());var et=(E.style.margin||0)+2.1;de.y-=et/2,de.height+=et,t.push({label:E,labelLine:_,position:M,len:O,len2:V,minTurnAngle:C.get("minTurnAngle"),maxSurfaceAngle:C.get("maxSurfaceAngle"),surfaceNormal:new X(W,H),linePoints:ue,textAlign:Ae,labelDistance:k,labelAlignTo:D,edgeDistance:R,bleedMargin:N,rect:de,unconstrainedWidth:de.width,labelStyleWidth:E.style.width})}L.setTextConfig({inside:se})}}),!s&&r.get("avoidLabelOverlap")&&tr(t,e,n,v,c,f,o,u);for(var y=0;y<t.length;y++){var p=t[y],h=p.label,m=p.labelLine,b=isNaN(h.x)||isNaN(h.y);if(h){h.setStyle({align:p.textAlign}),b&&(ie(h.states,d),h.ignore=!0);var A=h.states.select;A&&(A.x+=h.x,A.y+=h.y)}if(m){var w=p.linePoints;b||!w?(ie(m.states,d),m.ignore=!0):(Ia(w,p.minTurnAngle),Na(w,p.surfaceNormal,p.maxSurfaceAngle),m.setShape({points:w}),h.__hostTarget.textGuideLineConfig={anchor:new X(w[0][0],w[0][1])})}}}var rr=function(r){J(a,r);function a(t,e,n){var s=r.call(this)||this;s.z2=2;var i=new me;return s.setTextContent(i),s.updateData(t,e,n,!0),s}return a.prototype.updateData=function(t,e,n,s){var i=this,l=t.hostModel,v=t.getItemModel(e),c=v.getModel("emphasis"),o=t.getItemLayout(e),u=j(ye(v.getModel("itemStyle"),o,!0),o);if(isNaN(u.startAngle)){i.setShape(u);return}if(s){i.setShape(u);var f=l.getShallow("animationType");l.ecModel.ssr?(ee(i,{scaleX:0,scaleY:0},l,{dataIndex:e,isFrom:!0}),i.originX=u.cx,i.originY=u.cy):f==="scale"?(i.shape.r=o.r0,ee(i,{shape:{r:o.r}},l,e)):n!=null?(i.setShape({startAngle:n,endAngle:n}),ee(i,{shape:{startAngle:o.startAngle,endAngle:o.endAngle}},l,e)):(i.shape.endAngle=o.startAngle,te(i,{shape:{endAngle:o.endAngle}},l,e))}else xt(i),te(i,{shape:u},l,e);i.useStyle(t.getItemVisual(e,"style")),Me(i,v);var d=(o.startAngle+o.endAngle)/2,g=l.get("selectedOffset"),y=Math.cos(d)*g,p=Math.sin(d)*g,h=v.getShallow("cursor");h&&i.attr("cursor",h),this._updateLabel(l,t,e),i.ensureState("emphasis").shape=j({r:o.r+(c.get("scale")&&c.get("scaleSize")||0)},ye(c.getModel("itemStyle"),o)),j(i.ensureState("select"),{x:y,y:p,shape:ye(v.getModel(["select","itemStyle"]),o)}),j(i.ensureState("blur"),{shape:ye(v.getModel(["blur","itemStyle"]),o)});var m=i.getTextGuideLine(),b=i.getTextContent();m&&j(m.ensureState("select"),{x:y,y:p}),j(b.ensureState("select"),{x:y,y:p}),Pe(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},a.prototype._updateLabel=function(t,e,n){var s=this,i=e.getItemModel(n),l=i.getModel("labelLine"),v=e.getItemVisual(n,"style"),c=v&&v.fill,o=v&&v.opacity;Mt(s,Pt(i),{labelFetcher:e.hostModel,labelDataIndex:n,inheritColor:c,defaultOpacity:o,defaultText:t.getFormattedLabel(n,"normal")||e.getName(n)});var u=s.getTextContent();s.setTextConfig({position:null,rotation:null}),u.attr({z2:10});var f=t.get(["label","position"]);if(f!=="outside"&&f!=="outer")s.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new St,this.setTextGuideLine(d)),Ea(this,Oa(i),{stroke:c,opacity:ha(l.get(["lineStyle","opacity"]),o,1)})}},a}(ce),nr=function(r){J(a,r);function a(){var t=r!==null&&r.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return a.prototype.render=function(t,e,n,s){var i=t.getData(),l=this._data,v=this.group,c;if(!l&&i.count()>0){for(var o=i.getItemLayout(0),u=1;isNaN(o&&o.startAngle)&&u<i.count();++u)o=i.getItemLayout(u);o&&(c=o.startAngle)}if(this._emptyCircleSector&&v.remove(this._emptyCircleSector),i.count()===0&&t.get("showEmptyCircle")){var f=Vt(t),d=new ce({shape:j(Ot(t,n),f)});d.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,v.add(d)}i.diff(l).add(function(g){var y=new rr(i,g,c);i.setItemGraphicEl(g,y),v.add(y)}).update(function(g,y){var p=l.getItemGraphicEl(y);p.updateData(i,g,c),p.off("click"),v.add(p),i.setItemGraphicEl(g,p)}).remove(function(g){var y=l.getItemGraphicEl(g);Ye(y,t,g)}).execute(),ar(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=i)},a.prototype.dispose=function(){},a.prototype.containPoint=function(t,e){var n=e.getData(),s=n.getItemLayout(0);if(s){var i=t[0]-s.cx,l=t[1]-s.cy,v=Math.sqrt(i*i+l*l);return v<=s.r&&v>=s.r0}},a.type="pie",a}(He);function Gt(r,a,t){a=be(a)&&{coordDimensions:a}||j({encodeDefine:r.getEncode()},a);var e=r.getSource(),n=da(e,a).dimensions,s=new fa(n,r);return s.initData(e,t),s}var ir=function(){function r(a,t){this._getDataWithEncodedVisual=a,this._getRawData=t}return r.prototype.getAllNames=function(){var a=this._getRawData();return a.mapArray(a.getName)},r.prototype.containName=function(a){var t=this._getRawData();return t.indexOfName(a)>=0},r.prototype.indexOfName=function(a){var t=this._getDataWithEncodedVisual();return t.indexOfName(a)},r.prototype.getItemVisual=function(a,t){var e=this._getDataWithEncodedVisual();return e.getItemVisual(a,t)},r}(),sr=kt(),lr=function(r){J(a,r);function a(){return r!==null&&r.apply(this,arguments)||this}return a.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new ir(st(this.getData,this),st(this.getRawData,this)),this._defaultLabelLine(t)},a.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return Gt(this,{coordDimensions:["value"],encodeDefaulter:Ze(pa,this)})},a.prototype.getDataParams=function(t){var e=this.getData(),n=sr(e),s=n.seats;if(!s){var i=[];e.each(e.mapDimension("value"),function(v){i.push(v)}),s=n.seats=ma(i,e.hostModel.get("percentPrecision"))}var l=r.prototype.getDataParams.call(this,t);return l.percent=s[t]||0,l.$vars.push("percent"),l},a.prototype._defaultLabelLine=function(t){ya(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(ke);function or(r){return{seriesType:r,reset:function(a,t){var e=a.getData();e.filterSelf(function(n){var s=e.mapDimension("value"),i=e.get(s,n);return!(Ie(i)&&!isNaN(i)&&i<0)})}}}function vr(r){r.registerChartView(nr),r.registerSeriesModel(lr),ba("pie",r.registerAction),r.registerLayout(Ze(Ka,"pie")),r.registerProcessor(Qa("pie")),r.registerProcessor(or("pie"))}var cr=function(){function r(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return r}(),ur=function(r){J(a,r);function a(t){var e=r.call(this,t)||this;return e.type="pointer",e}return a.prototype.getDefaultShape=function(){return new cr},a.prototype.buildPath=function(t,e){var n=Math.cos,s=Math.sin,i=e.r,l=e.width,v=e.angle,c=e.x-n(v)*l*(l>=i/3?1:2),o=e.y-s(v)*l*(l>=i/3?1:2);v=e.angle-Math.PI/2,t.moveTo(c,o),t.lineTo(e.x+n(v)*l,e.y+s(v)*l),t.lineTo(e.x+n(e.angle)*i,e.y+s(e.angle)*i),t.lineTo(e.x-n(v)*l,e.y-s(v)*l),t.lineTo(c,o)},a}($e);function gr(r,a){var t=r.get("center"),e=a.getWidth(),n=a.getHeight(),s=Math.min(e,n),i=U(t[0],a.getWidth()),l=U(t[1],a.getHeight()),v=U(r.get("radius"),s/2);return{cx:i,cy:l,r:v}}function Le(r,a){var t=r==null?"":r+"";return a&&(_a(a)?t=a.replace("{value}",t):xa(a)&&(t=a(r))),t}var hr=function(r){J(a,r);function a(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.render=function(t,e,n){this.group.removeAll();var s=t.get(["axisLine","lineStyle","color"]),i=gr(t,n);this._renderMain(t,e,n,s,i),this._data=t.getData()},a.prototype.dispose=function(){},a.prototype._renderMain=function(t,e,n,s,i){var l=this.group,v=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,o=-t.get("endAngle")/180*Math.PI,u=t.getModel("axisLine"),f=u.get("roundCap"),d=f?Te:ce,g=u.get("show"),y=u.getModel("lineStyle"),p=y.get("width"),h=[c,o];Tt(h,!v),c=h[0],o=h[1];for(var m=o-c,b=c,A=[],w=0;g&&w<s.length;w++){var P=Math.min(Math.max(s[w][0],0),1);o=c+m*P;var L=new d({shape:{startAngle:b,endAngle:o,cx:i.cx,cy:i.cy,clockwise:v,r0:i.r-p,r:i.r},silent:!0});L.setStyle({fill:s[w][1]}),L.setStyle(y.getLineStyle(["color","width"])),A.push(L),b=o}A.reverse(),ie(A,function(E){return l.add(E)});var S=function(E){if(E<=0)return s[0][1];var _;for(_=0;_<s.length;_++)if(s[_][0]>=E&&(_===0?0:s[_-1][0])<E)return s[_][1];return s[_-1][1]};this._renderTicks(t,e,n,S,i,c,o,v,p),this._renderTitleAndDetail(t,e,n,S,i),this._renderAnchor(t,i),this._renderPointer(t,e,n,S,i,c,o,v,p)},a.prototype._renderTicks=function(t,e,n,s,i,l,v,c,o){for(var u=this.group,f=i.cx,d=i.cy,g=i.r,y=+t.get("min"),p=+t.get("max"),h=t.getModel("splitLine"),m=t.getModel("axisTick"),b=t.getModel("axisLabel"),A=t.get("splitNumber"),w=m.get("splitNumber"),P=U(h.get("length"),g),L=U(m.get("length"),g),S=l,E=(v-l)/A,_=E/w,x=h.getModel("lineStyle").getLineStyle(),I=m.getModel("lineStyle").getLineStyle(),M=h.get("distance"),k,D,R=0;R<=A;R++){if(k=Math.cos(S),D=Math.sin(S),h.get("show")){var N=M?M+o:o,C=new lt({shape:{x1:k*(g-N)+f,y1:D*(g-N)+d,x2:k*(g-P-N)+f,y2:D*(g-P-N)+d},style:x,silent:!0});x.stroke==="auto"&&C.setStyle({stroke:s(R/A)}),u.add(C)}if(b.get("show")){var N=b.get("distance")+M,O=Le(Aa(R/A*(p-y)+y),b.get("formatter")),V=s(R/A),B=k*(g-P-N)+f,W=D*(g-P-N)+d,H=b.get("rotate"),q=0;H==="radial"?(q=-S+2*Math.PI,q>Math.PI/2&&(q+=Math.PI)):H==="tangential"?q=-S-Math.PI/2:Ie(H)&&(q=H*Math.PI/180),q===0?u.add(new me({style:Se(b,{text:O,x:B,y:W,verticalAlign:D<-.8?"top":D>.8?"bottom":"middle",align:k<-.4?"left":k>.4?"right":"center"},{inheritColor:V}),silent:!0})):u.add(new me({style:Se(b,{text:O,x:B,y:W,verticalAlign:"middle",align:"center"},{inheritColor:V}),silent:!0,originX:B,originY:W,rotation:q}))}if(m.get("show")&&R!==A){var N=m.get("distance");N=N?N+o:o;for(var Z=0;Z<=w;Z++){k=Math.cos(S),D=Math.sin(S);var ue=new lt({shape:{x1:k*(g-N)+f,y1:D*(g-N)+d,x2:k*(g-L-N)+f,y2:D*(g-L-N)+d},silent:!0,style:I});I.stroke==="auto"&&ue.setStyle({stroke:s((R+Z/w)/A)}),u.add(ue),S+=_}S-=_}else S+=E}},a.prototype._renderPointer=function(t,e,n,s,i,l,v,c,o){var u=this.group,f=this._data,d=this._progressEls,g=[],y=t.get(["pointer","show"]),p=t.getModel("progress"),h=p.get("show"),m=t.getData(),b=m.mapDimension("value"),A=+t.get("min"),w=+t.get("max"),P=[A,w],L=[l,v];function S(_,x){var I=m.getItemModel(_),M=I.getModel("pointer"),k=U(M.get("width"),i.r),D=U(M.get("length"),i.r),R=t.get(["pointer","icon"]),N=M.get("offsetCenter"),C=U(N[0],i.r),O=U(N[1],i.r),V=M.get("keepAspect"),B;return R?B=vt(R,C-k/2,O-D,k,D,null,V):B=new ur({shape:{angle:-Math.PI/2,width:k,r:D,x:C,y:O}}),B.rotation=-(x+Math.PI/2),B.x=i.cx,B.y=i.cy,B}function E(_,x){var I=p.get("roundCap"),M=I?Te:ce,k=p.get("overlap"),D=k?p.get("width"):o/m.count(),R=k?i.r-D:i.r-(_+1)*D,N=k?i.r:i.r-_*D,C=new M({shape:{startAngle:l,endAngle:x,cx:i.cx,cy:i.cy,clockwise:c,r0:R,r:N}});return k&&(C.z2=ae(m.get(b,_),[A,w],[100,0],!0)),C}(h||y)&&(m.diff(f).add(function(_){var x=m.get(b,_);if(y){var I=S(_,l);ee(I,{rotation:-((isNaN(+x)?L[0]:ae(x,P,L,!0))+Math.PI/2)},t),u.add(I),m.setItemGraphicEl(_,I)}if(h){var M=E(_,l),k=p.get("clip");ee(M,{shape:{endAngle:ae(x,P,L,k)}},t),u.add(M),ot(t.seriesIndex,m.dataType,_,M),g[_]=M}}).update(function(_,x){var I=m.get(b,_);if(y){var M=f.getItemGraphicEl(x),k=M?M.rotation:l,D=S(_,k);D.rotation=k,te(D,{rotation:-((isNaN(+I)?L[0]:ae(I,P,L,!0))+Math.PI/2)},t),u.add(D),m.setItemGraphicEl(_,D)}if(h){var R=d[x],N=R?R.shape.endAngle:l,C=E(_,N),O=p.get("clip");te(C,{shape:{endAngle:ae(I,P,L,O)}},t),u.add(C),ot(t.seriesIndex,m.dataType,_,C),g[_]=C}}).execute(),m.each(function(_){var x=m.getItemModel(_),I=x.getModel("emphasis"),M=I.get("focus"),k=I.get("blurScope"),D=I.get("disabled");if(y){var R=m.getItemGraphicEl(_),N=m.getItemVisual(_,"style"),C=N.fill;if(R instanceof Sa){var O=R.style;R.useStyle(j({image:O.image,x:O.x,y:O.y,width:O.width,height:O.height},N))}else R.useStyle(N),R.type!=="pointer"&&R.setColor(C);R.setStyle(x.getModel(["pointer","itemStyle"]).getItemStyle()),R.style.fill==="auto"&&R.setStyle("fill",s(ae(m.get(b,_),P,[0,1],!0))),R.z2EmphasisLift=0,Me(R,x),Pe(R,M,k,D)}if(h){var V=g[_];V.useStyle(m.getItemVisual(_,"style")),V.setStyle(x.getModel(["progress","itemStyle"]).getItemStyle()),V.z2EmphasisLift=0,Me(V,x),Pe(V,M,k,D)}}),this._progressEls=g)},a.prototype._renderAnchor=function(t,e){var n=t.getModel("anchor"),s=n.get("show");if(s){var i=n.get("size"),l=n.get("icon"),v=n.get("offsetCenter"),c=n.get("keepAspect"),o=vt(l,e.cx-i/2+U(v[0],e.r),e.cy-i/2+U(v[1],e.r),i,i,null,c);o.z2=n.get("showAbove")?1:0,o.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(o)}},a.prototype._renderTitleAndDetail=function(t,e,n,s,i){var l=this,v=t.getData(),c=v.mapDimension("value"),o=+t.get("min"),u=+t.get("max"),f=new Fe,d=[],g=[],y=t.isAnimationEnabled(),p=t.get(["pointer","showAbove"]);v.diff(this._data).add(function(h){d[h]=new me({silent:!0}),g[h]=new me({silent:!0})}).update(function(h,m){d[h]=l._titleEls[m],g[h]=l._detailEls[m]}).execute(),v.each(function(h){var m=v.getItemModel(h),b=v.get(c,h),A=new Fe,w=s(ae(b,[o,u],[0,1],!0)),P=m.getModel("title");if(P.get("show")){var L=P.get("offsetCenter"),S=i.cx+U(L[0],i.r),E=i.cy+U(L[1],i.r),_=d[h];_.attr({z2:p?0:2,style:Se(P,{x:S,y:E,text:v.getName(h),align:"center",verticalAlign:"middle"},{inheritColor:w})}),A.add(_)}var x=m.getModel("detail");if(x.get("show")){var I=x.get("offsetCenter"),M=i.cx+U(I[0],i.r),k=i.cy+U(I[1],i.r),D=U(x.get("width"),i.r),R=U(x.get("height"),i.r),N=t.get(["progress","show"])?v.getItemVisual(h,"style").fill:w,_=g[h],C=x.get("formatter");_.attr({z2:p?0:2,style:Se(x,{x:M,y:k,text:Le(b,C),width:isNaN(D)?null:D,height:isNaN(R)?null:R,align:"center",verticalAlign:"middle"},{inheritColor:N})}),Ct(_,{normal:x},b,function(V){return Le(V,C)}),y&&wa(_,h,v,t,{getFormattedLabel:function(V,B,W,H,q,Z){return Le(Z?Z.interpolatedValue:b,C)}}),A.add(_)}f.add(A)}),this.group.add(f),this._titleEls=d,this._detailEls=g},a.type="gauge",a}(He),dr=function(r){J(a,r);function a(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=a.type,t.visualStyleAccessPath="itemStyle",t}return a.prototype.getInitialData=function(t,e){return Gt(this,["value"])},a.type="series.gauge",a.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},a}(ke);function fr(r){r.registerChartView(hr),r.registerSeriesModel(dr)}const pr={class:"platform-admin-statistics"},mr={class:"card-header"},yr={class:"tenant-stats-content"},br={class:"stat-item"},Ar={class:"stat-value"},Sr={class:"stat-change"},wr={class:"stat-item"},_r={class:"stat-value"},xr={class:"tenant-chart-container"},Dr={class:"trend-charts-container"},Lr={class:"chart-controls"},Pr={class:"card-header"},Mr={class:"system-stats-content"},Cr={class:"stat-item"},Tr={class:"stat-value"},kr={class:"stat-item"},Ir={class:"stat-change"},Nr={class:"system-chart-container"},Rr={class:"card-header"},Er={__name:"PlatformAdminStatistics",setup(r){Da([La,Ja,vr,fr,Pa,Ma,Ca,Ta,ka]);const a=K({totalTenants:128,totalUsers:3256,todayNewRegistrations:12}),t=K(null),e=K(null),n=K(null),s=K(null),i=K(null),l=K(null),v=K(null),c=K({}),o=K("week"),u={week:{dates:["周一","周二","周三","周四","周五","周六","周日"],tenantRegistrations:[12,13,10,13,9,23,21],userRegistrations:[22,18,19,23,29,33,31]},month:{dates:["第1周","第2周","第3周","第4周"],tenantRegistrations:[45,52,48,60],userRegistrations:[180,210,190,250]},quarter:{dates:["第1月","第2月","第3月"],tenantRegistrations:[150,180,200],userRegistrations:[600,750,850]}};function f(){const p=u[o.value],h={tooltip:{trigger:"axis"},legend:{data:["租户注册","用户注册"],bottom:0},xAxis:{type:"category",data:p.dates},yAxis:{type:"value"},series:[{name:"租户注册",data:p.tenantRegistrations,itemStyle:{color:"#3a8ee6"}},{name:"用户注册",data:p.userRegistrations,itemStyle:{color:"#13ce66"}}]};c.value.line||(c.value.line=pe(n.value),window.addEventListener("resize",()=>c.value.line.resize())),c.value.line.setOption({...h,title:{text:"注册趋势",left:"center"},series:h.series.map(m=>({...m,type:"line",smooth:!0}))}),c.value.bar||(c.value.bar=pe(s.value),window.addEventListener("resize",()=>c.value.bar.resize())),c.value.bar.setOption({...h,title:{text:"注册对比",left:"center"},series:h.series.map(m=>({...m,type:"bar"}))})}function d(){const p=pe(t.value);window.addEventListener("resize",()=>p.resize()),p.setOption({tooltip:{trigger:"item",formatter:"{b}<br/>数量: {c}<br/>占比: {d}%"},legend:{orient:"horizontal",left:"center",bottom:"5%"},series:[{name:"租户状态",type:"pie",radius:["40%","60%"],center:["50%","45%"],data:[{value:80,name:"活跃租户",itemStyle:{color:"#13ce66"}},{value:30,name:"未激活租户",itemStyle:{color:"#f56c6c"}},{value:18,name:"已暂停租户",itemStyle:{color:"#909399"}}],label:{show:!1}}]})}function g(){const p=pe(e.value);window.addEventListener("resize",()=>p.resize()),p.setOption({tooltip:{trigger:"item",formatter:"{b}<br/>数量: {c}<br/>占比: {d}%"},legend:{orient:"horizontal",left:"center",bottom:"5%"},series:[{name:"系统用户",type:"pie",radius:["40%","60%"],center:["50%","45%"],data:[{value:50,name:"超级管理员",itemStyle:{color:"#f56c6c"}},{value:800,name:"普通用户",itemStyle:{color:"#409eff"}},{value:200,name:"知识库管理员",itemStyle:{color:"#13ce66"}},{value:213,name:"知识库所有人",itemStyle:{color:"#e6a23c"}}],label:{show:!1}}]})}function y(){const p=[i,l,v],h=["CPU使用率","内存使用率","磁盘使用率"],m=[65,45,75];p.forEach((b,A)=>{const w=pe(b.value);window.addEventListener("resize",()=>w.resize()),w.setOption({title:{text:h[A],left:"center",top:"20px",textStyle:{fontSize:14}},series:[{type:"gauge",progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}%",offsetCenter:[0,"80%"]},data:[{value:m[A]}],axisLine:{lineStyle:{width:15,color:[[.3,"#67C23A"],[.7,"#E6A23C"],[1,"#F56C6C"]]}},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}}]})})}return Wt(()=>{Yt(()=>{f(),d(),g(),y()})}),Ft(o,f),(p,h)=>{const m=ve("el-icon"),b=ve("el-col"),A=ve("el-row"),w=ve("el-radio-button"),P=ve("el-radio-group"),L=ve("el-card");return $t(),Xt("div",pr,[G(L,{shadow:"hover",class:"tenant-stats-card"},{header:z(()=>[T("div",mr,[h[1]||(h[1]=T("span",{class:"card-title"},"租户统计",-1)),G(m,null,{default:z(()=>[G(fe(Ht))]),_:1})])]),default:z(()=>[T("div",yr,[G(A,{gutter:20},{default:z(()=>[G(b,{xs:24,sm:12,md:8},{default:z(()=>[T("div",br,[T("div",Ar,Oe(a.value.totalTenants),1),h[3]||(h[3]=T("div",{class:"stat-label"},"租户总数",-1)),T("div",Sr,[h[2]||(h[2]=T("span",{class:"change-text"},"7% 较昨日",-1)),G(m,{class:"change-icon down"},{default:z(()=>[G(fe(qt))]),_:1})])])]),_:1}),G(b,{xs:24,sm:12,md:8},{default:z(()=>[T("div",wr,[T("div",_r,Oe(a.value.todayNewRegistrations),1),h[4]||(h[4]=T("div",{class:"stat-label"},"今日新增",-1))])]),_:1}),G(b,{xs:24,sm:12,md:8},{default:z(()=>h[5]||(h[5]=[T("div",{class:"stat-item"},[T("div",{class:"stat-value"},"80"),T("div",{class:"stat-label"},"活跃租户"),T("div",{class:"stat-change"},[T("span",{class:"change-text"},"62.5%")])],-1)])),_:1,__:[5]})]),_:1}),T("div",xr,[T("div",{ref_key:"tenantStatusPieRef",ref:t,class:"echarts-chart tenant-pie-chart"},null,512)]),T("div",Dr,[T("div",Lr,[G(P,{modelValue:o.value,"onUpdate:modelValue":h[0]||(h[0]=S=>o.value=S),size:"small"},{default:z(()=>[G(w,{label:"week"},{default:z(()=>h[6]||(h[6]=[Ve("近一周")])),_:1,__:[6]}),G(w,{label:"month"},{default:z(()=>h[7]||(h[7]=[Ve("近一月")])),_:1,__:[7]}),G(w,{label:"quarter"},{default:z(()=>h[8]||(h[8]=[Ve("近一季")])),_:1,__:[8]})]),_:1},8,["modelValue"])]),G(A,{gutter:15},{default:z(()=>[G(b,{xs:24,sm:24,md:12},{default:z(()=>[T("div",{ref_key:"registrationLineRef",ref:n,class:"echarts-chart trend-chart"},null,512)]),_:1}),G(b,{xs:24,sm:24,md:12},{default:z(()=>[T("div",{ref_key:"registrationBarRef",ref:s,class:"echarts-chart trend-chart"},null,512)]),_:1})]),_:1})])])]),_:1}),G(L,{shadow:"hover",class:"system-stats-card"},{header:z(()=>[T("div",Pr,[h[9]||(h[9]=T("span",{class:"card-title"},"系统统计",-1)),G(m,null,{default:z(()=>[G(fe(jt))]),_:1})])]),default:z(()=>[T("div",Mr,[G(A,{gutter:20},{default:z(()=>[G(b,{xs:24,sm:12,md:8},{default:z(()=>[T("div",Cr,[T("div",Tr,Oe(a.value.totalUsers),1),h[10]||(h[10]=T("div",{class:"stat-label"},"系统用户总数",-1))])]),_:1}),G(b,{xs:24,sm:12,md:8},{default:z(()=>h[11]||(h[11]=[T("div",{class:"stat-item"},[T("div",{class:"stat-value"},"50,000"),T("div",{class:"stat-label"},"问答总统计"),T("div",{class:"stat-sub-label"},"(今日1000次)"),T("div",{class:"stat-change"},[T("span",{class:"change-text error"},"错误率3%")])],-1)])),_:1,__:[11]}),G(b,{xs:24,sm:12,md:8},{default:z(()=>[T("div",kr,[h[13]||(h[13]=T("div",{class:"stat-value"},"500",-1)),h[14]||(h[14]=T("div",{class:"stat-label"},"知识库全局统计",-1)),h[15]||(h[15]=T("div",{class:"stat-sub-label"},"最近新增:20个",-1)),T("div",Ir,[h[12]||(h[12]=T("span",{class:"change-text"},"5% 较昨日",-1)),G(m,{class:"change-icon up"},{default:z(()=>[G(fe(Zt))]),_:1})])])]),_:1})]),_:1}),T("div",Nr,[T("div",{ref_key:"systemUserPieRef",ref:e,class:"echarts-chart system-pie-chart"},null,512)])])]),_:1}),G(L,{shadow:"hover",class:"system-resource-card"},{header:z(()=>[T("div",Rr,[h[16]||(h[16]=T("span",{class:"card-title"},"系统资源使用",-1)),G(m,null,{default:z(()=>[G(fe(Jt))]),_:1})])]),default:z(()=>[G(A,{gutter:20,class:"resource-row"},{default:z(()=>[G(b,{xs:24,sm:8,md:8},{default:z(()=>[T("div",{ref_key:"cpuUsageRef",ref:i,class:"echarts-chart resource-chart"},null,512)]),_:1}),G(b,{xs:24,sm:8,md:8},{default:z(()=>[T("div",{ref_key:"memoryUsageRef",ref:l,class:"echarts-chart resource-chart"},null,512)]),_:1}),G(b,{xs:24,sm:8,md:8},{default:z(()=>[T("div",{ref_key:"diskUsageRef",ref:v,class:"echarts-chart resource-chart"},null,512)]),_:1})]),_:1})]),_:1})])}}},zr=Kt(Er,[["__scopeId","data-v-8fceb4d9"]]);export{zr as default};
