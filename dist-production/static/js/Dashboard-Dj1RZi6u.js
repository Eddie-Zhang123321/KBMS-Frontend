const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/PlatformAdminStatistics-BuJAm73v.js","static/js/vue-vendor-BUDnSszI.js","static/js/vendor-zcc-V1Og.js","static/css/vendor-CtIGEsJ0.css","static/js/_plugin-vue_export-helper-BCo6x5W8.js","static/js/charts-vendor-9etj8hyj.js","static/css/PlatformAdminStatistics-CtTJiV7q.css","static/js/TenantAdminStatistics-B0pfR5oL.js","static/css/TenantAdminStatistics-DOD6W0u1.css","static/js/UserKnowledgeStatistics-BpxE2MPY.js","static/css/UserKnowledgeStatistics-CPmG3mtp.css"])))=>i.map(i=>d[i]);
import{aL as a,aN as s}from"./vendor-zcc-V1Og.js";import{r as t,d as e,F as i,b1 as l,I as d,J as c,K as v,a1 as n,U as r,X as o,V as u,$ as m,a0 as f,av as p,N as y,u as g,c0 as _,bU as b,Z as w,c1 as k,c2 as h,bG as A,c3 as N,c4 as T,bX as D,bT as S,c5 as E,c6 as x,bq as j,bE as P,aT as I,c7 as O}from"./vue-vendor-BUDnSszI.js";import{u as $}from"./index-8D9d6p3q.js";import{u as B}from"./useWebSocket-CuTw-Xrt.js";import{g as L}from"./ticket-DtMqVmfI.js";import{_ as R}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./network-vendor-ztdpVPaQ.js";const W={class:"dashboard-container"},V={class:"dashboard-layout"},C={class:"notification-section"},U={class:"card-header"},q={key:0,class:"loading-notification"},K={key:1,class:"empty-notification"},M={key:0,class:"last-load-time"},X={class:"notification-content"},z={class:"notification-title"},F={class:"knowledge-base-name"},G={class:"notification-detail"},J={class:"notification-time"},Z={class:"stat-card"},H={class:"stat-icon"},Q={class:"stat-card"},Y={class:"stat-icon"},aa={class:"stat-card"},sa={class:"stat-icon"},ta={class:"stat-card"},ea={class:"stat-icon"},ia={class:"stat-card"},la={class:"stat-icon"},da={class:"stat-card"},ca={class:"stat-icon"},va={key:1,class:"tenant-role-distribution"},na={class:"role-content"},ra={class:"role-item"},oa={class:"role-icon normal-user"},ua={class:"role-item"},ma={class:"role-icon kb-admin"},fa={class:"role-item"},pa={class:"role-icon kb-owner"},ya={class:"role-item"},ga={class:"role-icon super-admin"},_a={key:2,class:"user-dashboard-overview"},ba={class:"overview-content"},wa={class:"activity-item"},ka={class:"activity-icon"},ha={class:"activity-item"},Aa={class:"activity-icon"},Na={class:"activity-item"},Ta={class:"activity-icon"},Da={class:"statistics-section"},Sa=R({__name:"Dashboard",setup(R){const Sa=O(()=>s(()=>import("./PlatformAdminStatistics-BuJAm73v.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Ea=O(()=>s(()=>import("./TenantAdminStatistics-B0pfR5oL.js"),__vite__mapDeps([7,1,2,3,4,5,8]))),xa=O(()=>s(()=>import("./UserKnowledgeStatistics-BpxE2MPY.js"),__vite__mapDeps([9,1,2,3,4,5,10]))),ja=$(),{notifications:Pa}=B(),Ia=t([]),Oa=t(!1),$a=t(null),Ba=e(()=>[...Ia.value||[],...Pa.list||[]].filter((a,s,t)=>s===t.findIndex(s=>s.id===a.id)).sort((a,s)=>(s.timestamp||0)-(a.timestamp||0))),La=e(()=>Ba.value),Ra=e(()=>Ba.value.length),Wa=a=>{if(!a)return"";const s=new Date-a,t=Math.floor(s/6e4);if(t<1)return"åˆšåˆš";if(t<60)return`${t}åˆ†é’Ÿå‰`;const e=Math.floor(t/60);return e<24?`${e}å°æ—¶å‰`:a.toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},Va=a=>{return{accuracy:"å‡†ç¡®åº¦",relevance:"ç›¸å…³åº¦",completeness:"å®Œæ•´åº¦",clarity:"æ¸…æ™°åº¦"}[s=a.feedbackType]||s||"å·¥å•é€šçŸ¥";var s},Ca=a=>{const s=[];return a.userName&&s.push(`ç”¨æˆ·ï¼š${a.userName}`),a.type&&s.push(`çŠ¶æ€ï¼š${Ua(a.type)}`),s.join(" | ")},Ua=a=>"NEW"===a?"æ–°å·¥å•":"PROCESSED"===a?"å·²å¤„ç†":a||"æœªçŸ¥çŠ¶æ€",qa=a=>"NEW"===a?"type-new":"PROCESSED"===a?"type-processed":"type-unknown";return i(()=>{(async()=>{try{Oa.value=!0;const s=await L();s?Array.isArray(s)?(Ia.value=s.map(a=>({id:a.id||Date.now(),knowledgeBaseName:a.knowledgeBaseName||"æœªçŸ¥çŸ¥è¯†åº“",userName:a.userName||"æœªçŸ¥ç”¨æˆ·",feedbackType:a.feedbackType||"å·¥å•é€šçŸ¥",createdAt:a.createdAt||(new Date).toISOString(),type:a.type||"NEW",timestamp:new Date(a.createdAt||Date.now()).getTime()})),a.success(`æˆåŠŸåŠ è½½ ${Ia.value.length} æ¡å·¥å•é€šçŸ¥`)):s.data&&Array.isArray(s.data)?(Ia.value=s.data.map(a=>({id:a.id||Date.now(),knowledgeBaseName:a.knowledgeBaseName||"æœªçŸ¥çŸ¥è¯†åº“",userName:a.userName||"æœªçŸ¥ç”¨æˆ·",feedbackType:a.feedbackType||"å·¥å•é€šçŸ¥",createdAt:a.createdAt||(new Date).toISOString(),type:a.type||"NEW",timestamp:new Date(a.createdAt||Date.now()).getTime()})),a.success(`æˆåŠŸåŠ è½½ ${Ia.value.length} æ¡å·¥å•é€šçŸ¥`)):a.warning("å·¥å•é€šçŸ¥æ•°æ®æ ¼å¼å¼‚å¸¸"):a.warning("æœªæ”¶åˆ°å·¥å•é€šçŸ¥æ•°æ®"),$a.value=new Date}catch(s){a.error("åŠ è½½å·¥å•é€šçŸ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥")}finally{Oa.value=!1}})()}),(a,s)=>{const t=l("el-icon"),e=l("el-badge"),i=l("el-scrollbar"),O=l("el-card"),$=l("el-col"),B=l("el-row");return c(),d("div",W,[v("div",V,[v("div",C,[n(O,{shadow:"hover",class:"notification-card"},{header:u(()=>[v("div",U,[s[0]||(s[0]=v("span",null,"å·¥å•é€šçŸ¥",-1)),n(e,{value:Ra.value,max:99,class:"unread-badge"},{default:u(()=>[n(t,null,{default:u(()=>[n(g(_))]),_:1})]),_:1},8,["value"])])]),default:u(()=>[n(i,{class:"notification-list"},{default:u(()=>[Oa.value?(c(),d("div",q,"åŠ è½½ä¸­...")):0===La.value.length?(c(),d("div",K,[s[1]||(s[1]=v("div",null,"æš‚æ— å·¥å•é€šçŸ¥",-1)),$a.value?(c(),d("div",M," æœ€åæ›´æ–°ï¼š"+m(Wa($a.value)),1)):o("",!0)])):o("",!0),(c(!0),d(f,null,p(La.value,a=>{return c(),d("div",{key:a.id,class:y(["notification-item",qa(a.type)])},[v("div",X,[v("div",z,[v("span",{class:y(["feedback-type-text",(t=a.feedbackType,"accuracy"===t?"feedback-accuracy":"relevance"===t?"feedback-relevance":"completeness"===t?"feedback-completeness":"clarity"===t?"feedback-clarity":"feedback-default")])},m(Va(a)),3),a.type?(c(),d("span",{key:0,class:y(["type-badge",qa(a.type)])},m(Ua(a.type)),3)):o("",!0)]),v("div",F," ğŸ“š "+m(a.knowledgeBaseName||"æœªçŸ¥çŸ¥è¯†åº“"),1),v("div",G,m(Ca(a)),1),v("div",J,m((s=a.createdAt,s||"æœªçŸ¥æ—¶é—´")),1)])],2);var s,t}),128))]),_:1})]),_:1}),g(ja).isPlatformAdmin?(c(),r(B,{key:0,gutter:8,class:"stats-row platform-stats-row"},{default:u(()=>[n($,{xs:12,sm:12,md:6,lg:6},{default:u(()=>[v("div",Z,[v("div",H,[n(t,null,{default:u(()=>[n(g(b))]),_:1})]),s[2]||(s[2]=v("div",{class:"stat-content"},[v("div",{class:"stat-title"},"ç™»å½•å¤±è´¥ç»Ÿè®¡"),v("div",{class:"stat-value"},[w("9"),v("span",{class:"stat-unit"},"æ¬¡")]),v("div",{class:"stat-desc"},"è¿‘24hå¤±è´¥æ•°")],-1))])]),_:1}),n($,{xs:12,sm:12,md:6,lg:6},{default:u(()=>[v("div",Q,[v("div",Y,[n(t,null,{default:u(()=>[n(g(k))]),_:1})]),s[3]||(s[3]=v("div",{class:"stat-content"},[v("div",{class:"stat-title"},"APIå¼‚å¸¸ç‡"),v("div",{class:"stat-value"},[w("2"),v("span",{class:"stat-unit"},"%")]),v("div",{class:"stat-desc"},"è·¨ç§Ÿæˆ·å æ¯”")],-1))])]),_:1}),n($,{xs:12,sm:12,md:6,lg:6},{default:u(()=>[v("div",aa,[v("div",sa,[n(t,null,{default:u(()=>[n(g(h))]),_:1})]),s[4]||(s[4]=v("div",{class:"stat-content"},[v("div",{class:"stat-title"},"å­˜å‚¨ä½¿ç”¨"),v("div",{class:"stat-value"},[w("2.3"),v("span",{class:"stat-unit"},"TB")]),v("div",{class:"stat-desc"},"å¹³å°æ€»å­˜å‚¨é‡")],-1))])]),_:1}),n($,{xs:12,sm:12,md:6,lg:6},{default:u(()=>[v("div",ta,[v("div",ea,[n(t,null,{default:u(()=>[n(g(A))]),_:1})]),s[5]||(s[5]=v("div",{class:"stat-content"},[v("div",{class:"stat-title"},"æ–‡æ¡£æ¡ç›®"),v("div",{class:"stat-value"},[w("1200"),v("span",{class:"stat-unit"},"æ¡")]),v("div",{class:"stat-desc"},"å…¨å¹³å°æ€»é‡")],-1))])]),_:1}),n($,{xs:12,sm:12,md:6,lg:6},{default:u(()=>[v("div",ia,[v("div",la,[n(t,null,{default:u(()=>[n(g(N))]),_:1})]),s[6]||(s[6]=v("div",{class:"stat-content"},[v("div",{class:"stat-title"},"ç³»ç»Ÿå‘Šè­¦"),v("div",{class:"stat-value"},[w("3"),v("span",{class:"stat-unit"},"æ¡")]),v("div",{class:"stat-desc"},"å¾…å¤„ç†å‘Šè­¦")],-1))])]),_:1}),n($,{xs:12,sm:12,md:6,lg:6},{default:u(()=>[v("div",da,[v("div",ca,[n(t,null,{default:u(()=>[n(g(T))]),_:1})]),s[7]||(s[7]=v("div",{class:"stat-content"},[v("div",{class:"stat-title"},"ç³»ç»Ÿå“åº”æ—¶é—´"),v("div",{class:"stat-value"},[w("156"),v("span",{class:"stat-unit"},"ms")]),v("div",{class:"stat-desc"},"å¹³å‡å“åº”æ—¶é—´")],-1))])]),_:1})]),_:1})):o("",!0),g(ja).isTenantSuperAdmin?(c(),d("div",va,[s[12]||(s[12]=v("div",{class:"role-header"},[v("h3",{class:"role-title"},"ç§Ÿæˆ·ç”¨æˆ·è§’è‰²åˆ†å¸ƒ"),v("div",{class:"role-total"},"æ€»ç”¨æˆ·æ•°ï¼š256äºº")],-1)),v("div",na,[v("div",ra,[v("div",oa,[n(t,null,{default:u(()=>[n(g(S))]),_:1})]),s[8]||(s[8]=D('<div class="role-info" data-v-0acd606a><div class="role-name" data-v-0acd606a>æ™®é€šç”¨æˆ·</div><div class="role-count" data-v-0acd606a>180äºº</div><div class="role-percentage" data-v-0acd606a>70.3%</div></div><div class="role-progress" data-v-0acd606a><div class="progress-bar" data-v-0acd606a><div class="progress-fill normal-fill" style="width:70.3%;" data-v-0acd606a></div></div></div>',2))]),v("div",ua,[v("div",ma,[n(t,null,{default:u(()=>[n(g(E))]),_:1})]),s[9]||(s[9]=D('<div class="role-info" data-v-0acd606a><div class="role-name" data-v-0acd606a>çŸ¥è¯†åº“ç®¡ç†å‘˜</div><div class="role-count" data-v-0acd606a>45äºº</div><div class="role-percentage" data-v-0acd606a>17.6%</div></div><div class="role-progress" data-v-0acd606a><div class="progress-bar" data-v-0acd606a><div class="progress-fill admin-fill" style="width:17.6%;" data-v-0acd606a></div></div></div>',2))]),v("div",fa,[v("div",pa,[n(t,null,{default:u(()=>[n(g(x))]),_:1})]),s[10]||(s[10]=D('<div class="role-info" data-v-0acd606a><div class="role-name" data-v-0acd606a>çŸ¥è¯†åº“æ‰€æœ‰äºº</div><div class="role-count" data-v-0acd606a>31äºº</div><div class="role-percentage" data-v-0acd606a>12.1%</div></div><div class="role-progress" data-v-0acd606a><div class="progress-bar" data-v-0acd606a><div class="progress-fill owner-fill" style="width:12.1%;" data-v-0acd606a></div></div></div>',2))]),v("div",ya,[v("div",ga,[n(t,null,{default:u(()=>[n(g(j))]),_:1})]),s[11]||(s[11]=D('<div class="role-info" data-v-0acd606a><div class="role-name" data-v-0acd606a>è¶…çº§ç®¡ç†å‘˜</div><div class="role-count" data-v-0acd606a>1äºº</div><div class="role-percentage" data-v-0acd606a>0.4%</div></div><div class="role-progress" data-v-0acd606a><div class="progress-bar" data-v-0acd606a><div class="progress-fill super-fill" style="width:0.4%;" data-v-0acd606a></div></div></div>',2))])])])):o("",!0),g(ja).isPlatformAdmin||g(ja).isTenantSuperAdmin?o("",!0):(c(),d("div",_a,[s[16]||(s[16]=v("div",{class:"overview-header"},[v("h3",{class:"overview-title"},"ä»Šæ—¥æ´»åŠ¨")],-1)),v("div",ba,[v("div",wa,[v("div",ka,[n(t,null,{default:u(()=>[n(g(P))]),_:1})]),s[13]||(s[13]=v("div",{class:"activity-info"},[v("div",{class:"activity-label"},"æŸ¥è¯¢æ¬¡æ•°"),v("div",{class:"activity-value"},"23æ¬¡")],-1))]),v("div",ha,[v("div",Aa,[n(t,null,{default:u(()=>[n(g(A))]),_:1})]),s[14]||(s[14]=v("div",{class:"activity-info"},[v("div",{class:"activity-label"},"æ–°å¢æ–‡æ¡£"),v("div",{class:"activity-value"},"5ä¸ª")],-1))]),v("div",Na,[v("div",Ta,[n(t,null,{default:u(()=>[n(g(I))]),_:1})]),s[15]||(s[15]=v("div",{class:"activity-info"},[v("div",{class:"activity-label"},"ä½¿ç”¨æ—¶é•¿"),v("div",{class:"activity-value"},"2.5å°æ—¶")],-1))])])]))]),v("div",Da,[g(ja).isPlatformAdmin?(c(),r(g(Sa),{key:0})):g(ja).isTenantSuperAdmin?(c(),r(g(Ea),{key:1})):(c(),r(g(xa),{key:2}))])])])}}},[["__scopeId","data-v-0acd606a"]]);export{Sa as default};
