import{a as e,r as a,d as s,F as t,n as l,b1 as i,bh as r,I as c,J as o,a1 as n,V as d,K as u,$ as v,u as m,aV as p,cc as h,Z as g,b$ as w,W as y,U as f,bE as b,c8 as _}from"./vue-vendor-BUDnSszI.js";import{_ as C}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{u as k,j as x,i as L,b as U,d as A,e as B,f as S,g as z,h as q}from"./charts-vendor-9etj8hyj.js";import"./vendor-zcc-V1Og.js";const F={class:"tenant-admin-statistics"},E={class:"card-header"},j={class:"core-metrics-content"},K={class:"metric-item"},N={class:"metric-value"},Q={class:"metric-change"},V={class:"change-text"},R={class:"metric-item"},I={class:"metric-value"},O={class:"metric-change"},T={class:"change-text"},$={class:"metric-item"},D={class:"metric-value"},G={class:"metric-change"},J={class:"change-text"},W={class:"metric-item"},Z={class:"metric-value"},H={class:"metric-change"},M={class:"change-text"},P={class:"card-header"},X={class:"tenant-overview-content"},Y={class:"overview-item"},ee={class:"overview-value"},ae={class:"overview-item"},se={class:"overview-value"},te={class:"overview-item"},le={class:"overview-value"},ie={class:"overview-item"},re={class:"overview-value"},ce={class:"overview-item"},oe={class:"overview-item"},ne={class:"overview-time"},de={class:"activity-charts-container"},ue={class:"chart-section"},ve={class:"chart-section"},me={class:"card-header"},pe={class:"header-actions"},he={class:"table-empty-tip"},ge=C({__name:"TenantAdminStatistics",setup(C){k([L,U,A,B,S,z,q]);const ge=e({totalUsers:256,totalKnowledgeBases:42,todayNewUsers:8,todayNewKBs:3,activeUsers:189,activeRate:73.8,totalQueries:15420,todayQueries:156}),we=a(89),ye=a(28),fe=a(12),be=a(2.3),_e=a(156),Ce=a(""),ke=a(null),xe=a(null),Le=a({}),Ue=()=>{const e=new Date;Ce.value=e.toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},Ae=a(""),Be=a(!1),Se=a([{username:"张三",lastLogin:"2024-01-15 14:30",knowledgeBases:5,queryCount:156,status:"活跃"},{username:"李四",lastLogin:"2024-01-15 13:45",knowledgeBases:2,queryCount:89,status:"活跃"},{username:"王五",lastLogin:"2024-01-15 12:20",knowledgeBases:8,queryCount:234,status:"活跃"},{username:"赵六",lastLogin:"2024-01-14 16:15",knowledgeBases:1,queryCount:23,status:"正常"},{username:"钱七",lastLogin:"2024-01-14 10:30",knowledgeBases:3,queryCount:67,status:"正常"},{username:"孙八",lastLogin:"2024-01-13 09:20",knowledgeBases:0,queryCount:0,status:"未激活"}]),ze=s(()=>Ae.value?Se.value.filter(e=>e.username.toLowerCase().includes(Ae.value.toLowerCase())||e.status.toLowerCase().includes(Ae.value.toLowerCase())):Se.value),qe=()=>{Be.value=!0,setTimeout(()=>{Be.value=!1},1e3)};return t(()=>{l(()=>{Le.value.userActivity||(Le.value.userActivity=x(ke.value),window.addEventListener("resize",()=>Le.value.userActivity.resize())),Le.value.userActivity.setOption({tooltip:{trigger:"axis"},legend:{data:["活跃用户","新用户"],bottom:0},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"活跃用户",type:"line",data:[45,52,48,61,55,67,63],smooth:!0,itemStyle:{color:"#409EFF"}},{name:"新用户",type:"line",data:[8,12,6,15,9,18,14],smooth:!0,itemStyle:{color:"#67C23A"}}]}),Le.value.kbUsage||(Le.value.kbUsage=x(xe.value),window.addEventListener("resize",()=>Le.value.kbUsage.resize())),Le.value.kbUsage.setOption({tooltip:{trigger:"item",formatter:"{b}<br/>使用次数: {c}<br/>占比: {d}%"},legend:{orient:"horizontal",left:"center",bottom:"5%"},series:[{name:"知识库使用",type:"pie",radius:["40%","60%"],center:["50%","45%"],data:[{value:156,name:"技术文档库",itemStyle:{color:"#409EFF"}},{value:89,name:"产品手册库",itemStyle:{color:"#67C23A"}},{value:67,name:"培训资料库",itemStyle:{color:"#E6A23C"}},{value:45,name:"FAQ库",itemStyle:{color:"#F56C6C"}},{value:23,name:"其他",itemStyle:{color:"#909399"}}],label:{show:!1}}]})}),Ue(),setInterval(Ue,1e3)}),(e,a)=>{const s=i("el-icon"),t=i("el-col"),l=i("el-row"),C=i("el-card"),k=i("el-tag"),x=i("el-input"),L=i("el-button"),U=i("el-table-column"),A=i("el-empty"),B=i("el-table"),S=r("loading");return o(),c("div",F,[n(C,{shadow:"hover",class:"core-metrics-card"},{header:d(()=>[u("div",E,[a[1]||(a[1]=u("span",{class:"card-title"},"租户核心指标",-1)),n(s,null,{default:d(()=>[n(m(h))]),_:1})])]),default:d(()=>[u("div",j,[n(l,{gutter:20},{default:d(()=>[n(t,{xs:12,sm:8,md:6},{default:d(()=>[u("div",K,[u("div",N,v(ge.totalUsers),1),a[2]||(a[2]=u("div",{class:"metric-label"},"用户总数",-1)),u("div",Q,[u("span",V,"+"+v(ge.todayNewUsers)+" 今日",1),n(s,{class:"change-icon up"},{default:d(()=>[n(m(p))]),_:1})])])]),_:1}),n(t,{xs:12,sm:8,md:6},{default:d(()=>[u("div",R,[u("div",I,v(ge.totalKnowledgeBases),1),a[3]||(a[3]=u("div",{class:"metric-label"},"知识库数量",-1)),u("div",O,[u("span",T,"+"+v(ge.todayNewKBs)+" 今日",1),n(s,{class:"change-icon up"},{default:d(()=>[n(m(p))]),_:1})])])]),_:1}),n(t,{xs:12,sm:8,md:6},{default:d(()=>[u("div",$,[u("div",D,v(ge.activeUsers),1),a[4]||(a[4]=u("div",{class:"metric-label"},"活跃用户",-1)),u("div",G,[u("span",J,v(ge.activeRate)+"% 活跃率",1)])])]),_:1}),n(t,{xs:12,sm:8,md:6},{default:d(()=>[u("div",W,[u("div",Z,v(ge.totalQueries),1),a[5]||(a[5]=u("div",{class:"metric-label"},"总查询次数",-1)),u("div",H,[u("span",M,"+"+v(ge.todayQueries)+" 今日",1),n(s,{class:"change-icon up"},{default:d(()=>[n(m(p))]),_:1})])])]),_:1})]),_:1})])]),_:1}),n(C,{shadow:"hover",class:"realtime-monitor-card"},{header:d(()=>[u("div",P,[a[6]||(a[6]=u("span",{class:"card-title"},"租户实时监控",-1)),n(s,null,{default:d(()=>[n(m(w))]),_:1})])]),default:d(()=>[u("div",X,[u("div",Y,[a[7]||(a[7]=u("span",{class:"overview-label"},"在线用户",-1)),u("span",ee,v(we.value),1)]),u("div",ae,[a[8]||(a[8]=u("span",{class:"overview-label"},"使用中知识库",-1)),u("span",se,v(ye.value),1)]),u("div",te,[a[9]||(a[9]=u("span",{class:"overview-label"},"查询频率",-1)),u("span",le,v(fe.value)+"/min",1)]),u("div",ie,[a[10]||(a[10]=u("span",{class:"overview-label"},"存储使用",-1)),u("span",re,v(be.value)+"GB",1)]),u("div",ce,[a[11]||(a[11]=u("span",{class:"overview-label"},"响应时间",-1)),n(k,{type:_e.value<200?"success":_e.value<500?"warning":"danger",effect:"light",size:"small"},{default:d(()=>[g(v(_e.value)+"ms",1)]),_:1},8,["type"])]),u("div",oe,[a[12]||(a[12]=u("span",{class:"overview-label"},"最后更新",-1)),u("span",ne,v(Ce.value),1)])]),u("div",de,[n(l,{gutter:15},{default:d(()=>[n(t,{xs:24,sm:12},{default:d(()=>[u("div",ue,[a[13]||(a[13]=u("div",{class:"chart-title"},"用户活跃度趋势",-1)),u("div",{ref_key:"userActivityRef",ref:ke,class:"echarts-chart activity-chart"},null,512)])]),_:1}),n(t,{xs:24,sm:12},{default:d(()=>[u("div",ve,[a[14]||(a[14]=u("div",{class:"chart-title"},"知识库使用分布",-1)),u("div",{ref_key:"kbUsageRef",ref:xe,class:"echarts-chart activity-chart"},null,512)])]),_:1})]),_:1})])]),_:1}),n(C,{shadow:"hover",class:"user-management-card"},{header:d(()=>[u("div",me,[a[16]||(a[16]=u("span",{class:"card-title"},"用户管理概览",-1)),u("div",pe,[n(x,{modelValue:Ae.value,"onUpdate:modelValue":a[0]||(a[0]=e=>Ae.value=e),placeholder:"搜索用户...",clearable:"","prefix-icon":m(b),class:"search-input"},null,8,["modelValue","prefix-icon"]),n(L,{type:"primary",size:"small",onClick:qe},{default:d(()=>[n(s,null,{default:d(()=>[n(m(_))]),_:1}),a[15]||(a[15]=g(" 刷新 "))]),_:1,__:[15]})])])]),default:d(()=>[y((o(),f(B,{data:ze.value,stripe:"",style:{width:"100%"}},{empty:d(()=>[u("div",he,[n(A,{description:"没有找到匹配的用户数据"})])]),default:d(()=>[n(U,{prop:"username",label:"用户名","min-width":"120"}),n(U,{prop:"lastLogin",label:"最后登录","min-width":"120"}),n(U,{prop:"knowledgeBases",label:"知识库数量","min-width":"100"}),n(U,{prop:"queryCount",label:"查询次数","min-width":"100"}),n(U,{prop:"status",label:"状态","min-width":"80"},{default:d(e=>{return[n(k,{type:(a=e.row.status,{"活跃":"success","正常":"primary","未激活":"info"}[a]||"info"),effect:"light"},{default:d(()=>[g(v(e.row.status),1)]),_:2},1032,["type"])];var a}),_:1}),n(U,{label:"操作",width:"120",fixed:"right"},{default:d(e=>[n(L,{type:"primary",link:"",onClick:a=>{e.row}},{default:d(()=>a[17]||(a[17]=[g(" 详情 ")])),_:2,__:[17]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[S,Be.value]])]),_:1})])}}},[["__scopeId","data-v-13f31797"]]);export{ge as default};
