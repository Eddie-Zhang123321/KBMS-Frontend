import{_ as e}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{r as a,d as t,F as l,b1 as o,bh as r,I as u,J as m,a1 as d,W as s,V as p,a0 as i,av as n,U as v,Z as c}from"./vue-vendor-BUDnSszI.js";import"./vendor-zcc-V1Og.js";const g={class:"system-logs"},f=e({__name:"SystemLogs",setup(e){const f=a({operator:"",module:"",timeRange:""}),h=a(!1),w=a(1),b=a(10),_=a(""),y=a([]),x=a([{timestamp:"2025-09-22 09:38:25",operator:"李桂芬",module:"租户管理",details:"新租户创建：测试公司B"},{timestamp:"2025-09-20 09:30:25",operator:"李桂芬",module:"租户管理",details:"新租户创建：测试公司A"},{timestamp:"2025-09-18 09:26:10",operator:"周恩圣",module:"用户管理",details:"添加用户：张三"},{timestamp:"2025-09-16 09:29:45",operator:"柳梦佳",module:"角色权限管理",details:"移除超级管理员：李四"},{timestamp:"2025-09-16 08:28:13",operator:"王晓",module:"知识库管理",details:"删除知识库：金融投资指南"},{timestamp:"2025-09-15 09:12:30",operator:"张明慧",module:"系统参数设置",details:"更新系统配置：调整用户数量限制"},{timestamp:"2025-09-14 16:45:20",operator:"钱程",module:"租户管理",details:"删除租户：无效公司"},{timestamp:"2025-09-13 14:30:15",operator:"李强",module:"知识库管理",details:"新增知识库：产品手册"},{timestamp:"2025-09-12 11:25:43",operator:"王博雅",module:"知识库管理",details:"删除知识库：过期文档"},{timestamp:"2025-08-30 16:41:37",operator:"王博雅",module:"用户管理",details:"删除用户：王五"},{timestamp:"2025-08-28 16:33:50",operator:"李强",module:"角色权限管理",details:"添加超级管理员：李四"},{timestamp:"2025-08-28 16:11:22",operator:"王淑琴",module:"系统参数设置",details:"修改系统参数：超时时间"},{timestamp:"2025-08-28 14:20:41",operator:"赵静",module:"租户管理",details:"新租户注册：ABC公司"},{timestamp:"2025-08-21 19:09:38",operator:"王晓",module:"用户管理",details:"禁用用户：王五"},{timestamp:"2025-08-21 14:18:16",operator:"刘璐",module:"角色权限管理",details:"删除角色：访客B"},{timestamp:"2025-08-21 14:18:19",operator:"刘璐",module:"角色权限管理",details:"删除角色：访客A"},{timestamp:"2025-08-20 16:45:20",operator:"李强",module:"知识库管理",details:"删除知识库：临时文档"},{timestamp:"2025-08-19 11:56:56",operator:"马晓云",module:"用户管理",details:"重置用户密码：赵六"},{timestamp:"2025-08-19 11:44:35",operator:"李强",module:"系统参数设置",details:"修改日志保留时间"},{timestamp:"2025-08-19 10:31:15",operator:"姜梦",module:"租户管理",details:"修改租户配置：DEF集团"},{timestamp:"2025-08-18 10:25:36",operator:"张敏",module:"用户管理",details:"批量导入8名用户"},{timestamp:"2025-08-17 15:30:21",operator:"张敏",module:"知识库管理",details:"新增知识库：技术文档"},{timestamp:"2025-08-17 10:55:45",operator:"王晓",module:"角色权限管理",details:"更新角色描述：审核员"},{timestamp:"2025-08-16 15:39:16",operator:"赵志远",module:"租户管理",details:"暂停租户服务：GHI公司"},{timestamp:"2025-08-16 15:22:25",operator:"王晓",module:"知识库管理",details:"新增知识库：金融投资指南"},{timestamp:"2025-08-16 15:05:47",operator:"王晓",module:"角色权限管理",details:"删除用户：临时用户"},{timestamp:"2025-08-16 14:30:59",operator:"孙一洋",module:"系统参数设置",details:"更新数据库连接配置"}]),A=a([...x.value]),V=()=>{"platformAdmin"===_.value?A.value=x.value.filter(e=>"租户管理"===e.module||"系统参数设置"===e.module):"tenantSuperAdmin"===_.value?A.value=x.value.filter(e=>"用户管理"===e.module||"角色权限管理"===e.module||"知识库管理"===e.module):A.value=[]},S=t(()=>A.value.length),C=t(()=>{const e=(w.value-1)*b.value,a=e+b.value;return A.value.slice(e,a)}),R=()=>{h.value=!0,w.value=1,setTimeout(()=>{let e=[...x.value];if(e="platformAdmin"===_.value?e.filter(e=>"租户管理"===e.module||"系统参数设置"===e.module):"tenantSuperAdmin"===_.value?e.filter(e=>"用户管理"===e.module||"角色权限管理"===e.module||"知识库管理"===e.module):[],f.value.operator&&(e=e.filter(e=>e.operator.toLowerCase().includes(f.value.operator.toLowerCase()))),f.value.module&&(e=e.filter(e=>e.module===f.value.module)),f.value.timeRange&&"all"!==f.value.timeRange){const a=(e=>{const a=new Date;switch(e){case"week":return new Date(a.getTime()-6048e5);case"month":return new Date(a.getTime()-2592e6);case"year":return new Date(a.getTime()-31536e6);default:return null}})(f.value.timeRange);e=e.filter(e=>new Date(e.timestamp)>=a)}A.value=e,h.value=!1},500)},k=()=>{f.value={operator:"",module:"",timeRange:""},w.value=1,V()},D=e=>{w.value=e};return l(()=>{(()=>{const e=JSON.parse(localStorage.getItem("platformAdmin"))||!1,a=JSON.parse(localStorage.getItem("tenantSuperAdmin"))||!1;e?(_.value="platformAdmin",y.value=["租户管理","系统参数设置"]):a?(_.value="tenantSuperAdmin",y.value=["用户管理","角色权限管理","知识库管理"]):(_.value="normalUser",y.value=[]),V()})()}),(e,a)=>{const t=o("el-input"),l=o("el-option"),_=o("el-select"),x=o("el-col"),A=o("el-button"),V=o("el-row"),U=o("el-table-column"),j=o("el-table"),I=o("el-pagination"),T=r("loading");return m(),u("div",g,[d(V,{gutter:16,class:"filter-row"},{default:p(()=>[d(x,{span:18,class:"filter-inputs"},{default:p(()=>[d(t,{placeholder:"请输入操作人",modelValue:f.value.operator,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value.operator=e),clearable:"",style:{width:"200px","margin-right":"16px"}},null,8,["modelValue"]),d(_,{modelValue:f.value.module,"onUpdate:modelValue":a[1]||(a[1]=e=>f.value.module=e),placeholder:"请选择操作模块",style:{width:"200px","margin-right":"16px"},clearable:""},{default:p(()=>[(m(!0),u(i,null,n(y.value,e=>(m(),v(l,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),d(_,{modelValue:f.value.timeRange,"onUpdate:modelValue":a[2]||(a[2]=e=>f.value.timeRange=e),placeholder:"请选择时间范围",style:{width:"200px"},clearable:""},{default:p(()=>[d(l,{label:"一周内",value:"week"}),d(l,{label:"一月内",value:"month"}),d(l,{label:"一年内",value:"year"}),d(l,{label:"全部",value:"all"})]),_:1},8,["modelValue"])]),_:1}),d(x,{span:6,class:"button-group"},{default:p(()=>[d(A,{type:"primary",onClick:R},{default:p(()=>a[4]||(a[4]=[c("查询")])),_:1,__:[4]}),d(A,{onClick:k},{default:p(()=>a[5]||(a[5]=[c("重置")])),_:1,__:[5]})]),_:1})]),_:1}),s((m(),v(j,{data:C.value,style:{width:"100%"},stripe:"","row-style":{height:"60px"}},{default:p(()=>[d(U,{prop:"timestamp",label:"时间",width:"220"}),d(U,{prop:"operator",label:"操作人",width:"160"}),d(U,{prop:"module",label:"操作模块",width:"200"}),d(U,{prop:"details",label:"操作详情"})]),_:1},8,["data"])),[[T,h.value]]),d(I,{"current-page":w.value,"onUpdate:currentPage":a[3]||(a[3]=e=>w.value=e),total:S.value,"page-size":b.value,layout:"total, prev, pager, next, jumper",onCurrentChange:D,style:{"margin-top":"20px","justify-content":"flex-start"}},null,8,["current-page","total","page-size"])])}}},[["__scopeId","data-v-a059595d"]]);export{f as default};
