import{bS as e,a,r as l,b1 as s,I as r,J as o,a1 as i,K as t,V as d,u,bT as n,bU as m,Z as p,as as c}from"./vue-vendor-BUDnSszI.js";import{_ as g}from"./logo-B9TFvINw.js";import{u as f}from"./index-8D9d6p3q.js";import{C as _}from"./CubeBackground-DDxgKxHE.js";import{_ as v}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{aL as b}from"./vendor-zcc-V1Og.js";import"./network-vendor-ztdpVPaQ.js";const h={class:"back"},w={class:"login-container"},y={class:"login-card"},V={class:"login-footer"},k=v({__name:"Login",setup(v){const k=e(),j=f(),x=a({email:"",password:""}),C=a({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在6到20个字符",trigger:"blur"}]}),U=l(!1),z=l(!1),I=async()=>{try{z.value=!0,await j.login(x);try{await j.fetchPreferences()}catch(e){}b.success("登录成功"),k.push(j.defaultPage)}catch(e){const a=e?.message||e?.data?.message||e?.response?.data?.message||"登录失败";b.error(a)}finally{z.value=!1}},L=()=>{b.info("请联系管理员重置密码")},q=()=>{k.push("/register")};return(e,a)=>{const l=s("el-icon"),f=s("el-input"),v=s("el-form-item"),b=s("el-checkbox"),k=s("el-button"),j=s("el-form"),F=s("el-link"),K=s("el-divider");return o(),r("div",h,[i(_),t("div",w,[t("div",y,[a[7]||(a[7]=t("div",{class:"login-header"},[t("img",{src:g,alt:"Logo",class:"logo"}),t("h1",null,"InsightFlow"),t("p",null,"请输入您的账号密码")],-1)),i(j,{ref:"loginForm",model:x,rules:C,onKeyup:c(I,["enter"])},{default:d(()=>[i(v,{prop:"email"},{default:d(()=>[i(f,{modelValue:x.email,"onUpdate:modelValue":a[0]||(a[0]=e=>x.email=e),placeholder:"请输入邮箱",size:"large"},{prefix:d(()=>[i(l,null,{default:d(()=>[i(u(n))]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(v,{prop:"password"},{default:d(()=>[i(f,{modelValue:x.password,"onUpdate:modelValue":a[1]||(a[1]=e=>x.password=e),type:"password",placeholder:"请输入密码",size:"large","show-password":""},{prefix:d(()=>[i(l,null,{default:d(()=>[i(u(m))]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(b,{modelValue:U.value,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value=e),class:"remember-me"},{default:d(()=>a[3]||(a[3]=[p("记住我")])),_:1,__:[3]},8,["modelValue"]),i(k,{type:"primary",size:"large",class:"login-btn",loading:z.value,onClick:I},{default:d(()=>a[4]||(a[4]=[p(" 登 录 ")])),_:1,__:[4]},8,["loading"])]),_:1},8,["model","rules"]),t("div",V,[i(F,{type:"info",onClick:L},{default:d(()=>a[5]||(a[5]=[p("忘记密码?")])),_:1,__:[5]}),i(K,{direction:"vertical"}),i(F,{type:"primary",onClick:q},{default:d(()=>a[6]||(a[6]=[p("注册账号")])),_:1,__:[6]})])])])])}}},[["__scopeId","data-v-e91ce93c"]]);export{k as default};
