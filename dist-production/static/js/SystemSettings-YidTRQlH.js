import{u as e}from"./index-8D9d6p3q.js";import{_ as a}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{aL as l}from"./vendor-zcc-V1Og.js";import{d as t,a as u,b1 as o,I as n,J as s,U as d,X as i,V as r,a1 as m,K as c,Z as h}from"./vue-vendor-BUDnSszI.js";import"./network-vendor-ztdpVPaQ.js";const _={class:"system-settings"},f={class:"inline-inputs"},p={class:"actions"},g={class:"actions"},b=a({__name:"SystemSettings",setup(a){const b=e(),v=t(()=>b.platformAdmin),y=t(()=>b.tenantSuperAdmin),V={securityAuth:{tokenMin:30,tokenMax:1440,maxLoginFailures:10,passwordStrength:"medium"},systemBehavior:{maxUploadSizeMB:200,allowBatchUpload:!0,logRetentionDaysMax:365},tenantQuota:{kbLimitPerTenant:100,userLimitPerTenant:2e3,storageLimitPerTenantGB:500},advancedControls:{allowSelfRegister:!1,enableKbEmbed:!0}},x={securityAuth:{tokenMinutes:60,maxLoginFailures:5,passwordStrength:"medium"},systemBehavior:{singleFileMaxUploadMB:150,logRetentionDays:180},tenantQuota:{kbLimit:50,userLimit:800},featureToggles:{allowSelfRegister:!1,userEditable:!0,enableKbEmbed:!0}},w=u(JSON.parse(JSON.stringify(V))),B=u(JSON.parse(JSON.stringify(x))),U={low:1,medium:2,high:3};function k(){l.success("平台设置已保存")}function A(){Object.assign(w.securityAuth,V.securityAuth),Object.assign(w.systemBehavior,V.systemBehavior),Object.assign(w.tenantQuota,V.tenantQuota),Object.assign(w.advancedControls,V.advancedControls),l.success("已恢复平台默认值")}function M(){const e=function(){const e=w,a=B,l=[];return(a.securityAuth.tokenMinutes<e.securityAuth.tokenMin||a.securityAuth.tokenMinutes>e.securityAuth.tokenMax)&&l.push("租户 token 有效期需在平台设置范围内"),a.securityAuth.maxLoginFailures>e.securityAuth.maxLoginFailures&&l.push("租户最大登录失败次数不得超过平台上限"),U[a.securityAuth.passwordStrength]<U[e.securityAuth.passwordStrength]&&l.push("租户密码强度不得低于平台最低要求"),a.systemBehavior.singleFileMaxUploadMB>e.systemBehavior.maxUploadSizeMB&&l.push("租户单文件上传大小上限不得超过平台上限"),a.systemBehavior.logRetentionDays>e.systemBehavior.logRetentionDaysMax&&l.push("租户日志保留天数不得超过平台上限"),a.tenantQuota.kbLimit>e.tenantQuota.kbLimitPerTenant&&l.push("租户知识库数量限制不得超过平台上限"),a.tenantQuota.userLimit>e.tenantQuota.userLimitPerTenant&&l.push("租户用户数量限制不得超过平台上限"),a.featureToggles.allowSelfRegister&&!e.advancedControls.allowSelfRegister&&l.push("平台未开放自主注册，租户不可开启"),a.featureToggles.enableKbEmbed&&!e.advancedControls.enableKbEmbed&&l.push("平台未启用外部嵌入，租户不可开启"),l}();e.length?l.error(e.join("；")):l.success("租户设置已保存")}function L(){Object.assign(B.securityAuth,x.securityAuth),Object.assign(B.systemBehavior,x.systemBehavior),Object.assign(B.tenantQuota,x.tenantQuota),Object.assign(B.featureToggles,x.featureToggles),l.success("已恢复租户默认值")}return(e,a)=>{const l=o("el-input-number"),t=o("el-form-item"),u=o("el-option"),b=o("el-select"),V=o("el-form"),x=o("el-card"),U=o("el-col"),S=o("el-radio"),T=o("el-radio-group"),Q=o("el-row"),R=o("el-button");return s(),n("div",_,[v.value?(s(),d(x,{key:0,class:"settings-card",shadow:"hover"},{header:r(()=>a[22]||(a[22]=[c("div",{class:"card-header"},[c("span",null,"平台管理员设置（全局规则 + 上限阈值）")],-1)])),default:r(()=>[m(Q,{gutter:16},{default:r(()=>[m(U,{span:12},{default:r(()=>[m(x,{class:"section-card",shadow:"never"},{header:r(()=>a[23]||(a[23]=[c("span",null,"安全与认证",-1)])),default:r(()=>[m(V,{model:w.securityAuth,"label-width":"160px"},{default:r(()=>[m(t,{label:"token有效范围（分钟）"},{default:r(()=>[c("div",f,[a[24]||(a[24]=c("span",null,"最小值：",-1)),m(l,{modelValue:w.securityAuth.tokenMin,"onUpdate:modelValue":a[0]||(a[0]=e=>w.securityAuth.tokenMin=e),min:1,max:1e5},null,8,["modelValue"]),a[25]||(a[25]=c("span",{class:"spacer"},null,-1)),a[26]||(a[26]=c("span",null,"最大值：",-1)),m(l,{modelValue:w.securityAuth.tokenMax,"onUpdate:modelValue":a[1]||(a[1]=e=>w.securityAuth.tokenMax=e),min:w.securityAuth.tokenMin,max:2e5},null,8,["modelValue","min"])])]),_:1}),m(t,{label:"最大登录失败次数上限"},{default:r(()=>[m(l,{modelValue:w.securityAuth.maxLoginFailures,"onUpdate:modelValue":a[2]||(a[2]=e=>w.securityAuth.maxLoginFailures=e),min:1,max:100},null,8,["modelValue"])]),_:1}),m(t,{label:"密码强度最低要求"},{default:r(()=>[m(b,{modelValue:w.securityAuth.passwordStrength,"onUpdate:modelValue":a[3]||(a[3]=e=>w.securityAuth.passwordStrength=e),placeholder:"请选择"},{default:r(()=>[m(u,{label:"低",value:"low"}),m(u,{label:"中",value:"medium"}),m(u,{label:"高",value:"high"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),m(U,{span:12},{default:r(()=>[m(x,{class:"section-card",shadow:"never"},{header:r(()=>a[27]||(a[27]=[c("span",null,"系统行为",-1)])),default:r(()=>[m(V,{model:w.systemBehavior,"label-width":"180px"},{default:r(()=>[m(t,{label:"上传文件大小上限（MB）"},{default:r(()=>[m(l,{modelValue:w.systemBehavior.maxUploadSizeMB,"onUpdate:modelValue":a[4]||(a[4]=e=>w.systemBehavior.maxUploadSizeMB=e),min:1,max:102400},null,8,["modelValue"])]),_:1}),m(t,{label:"是否允许批量上传"},{default:r(()=>[m(T,{modelValue:w.systemBehavior.allowBatchUpload,"onUpdate:modelValue":a[5]||(a[5]=e=>w.systemBehavior.allowBatchUpload=e)},{default:r(()=>[m(S,{value:!0},{default:r(()=>a[28]||(a[28]=[h("开启")])),_:1,__:[28]}),m(S,{value:!1},{default:r(()=>a[29]||(a[29]=[h("关闭")])),_:1,__:[29]})]),_:1},8,["modelValue"])]),_:1}),m(t,{label:"日志保留天数上限"},{default:r(()=>[m(l,{modelValue:w.systemBehavior.logRetentionDaysMax,"onUpdate:modelValue":a[6]||(a[6]=e=>w.systemBehavior.logRetentionDaysMax=e),min:1,max:3650},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),m(U,{span:12},{default:r(()=>[m(x,{class:"section-card",shadow:"never"},{header:r(()=>a[30]||(a[30]=[c("span",null,"租户配额",-1)])),default:r(()=>[m(V,{model:w.tenantQuota,"label-width":"220px"},{default:r(()=>[m(t,{label:"单租户最大知识库数上限"},{default:r(()=>[m(l,{modelValue:w.tenantQuota.kbLimitPerTenant,"onUpdate:modelValue":a[7]||(a[7]=e=>w.tenantQuota.kbLimitPerTenant=e),min:1,max:1e5},null,8,["modelValue"])]),_:1}),m(t,{label:"单租户最大用户数上限"},{default:r(()=>[m(l,{modelValue:w.tenantQuota.userLimitPerTenant,"onUpdate:modelValue":a[8]||(a[8]=e=>w.tenantQuota.userLimitPerTenant=e),min:1,max:1e6},null,8,["modelValue"])]),_:1}),m(t,{label:"单租户最大存储容量上限（GB）"},{default:r(()=>[m(l,{modelValue:w.tenantQuota.storageLimitPerTenantGB,"onUpdate:modelValue":a[9]||(a[9]=e=>w.tenantQuota.storageLimitPerTenantGB=e),min:1,max:1048576},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),m(U,{span:12},{default:r(()=>[m(x,{class:"section-card",shadow:"never"},{header:r(()=>a[31]||(a[31]=[c("span",null,"高级功能控制",-1)])),default:r(()=>[m(V,{model:w.advancedControls,"label-width":"220px"},{default:r(()=>[m(t,{label:"是否开放自主注册"},{default:r(()=>[m(T,{modelValue:w.advancedControls.allowSelfRegister,"onUpdate:modelValue":a[10]||(a[10]=e=>w.advancedControls.allowSelfRegister=e)},{default:r(()=>[m(S,{value:!0},{default:r(()=>a[32]||(a[32]=[h("开启")])),_:1,__:[32]}),m(S,{value:!1},{default:r(()=>a[33]||(a[33]=[h("关闭")])),_:1,__:[33]})]),_:1},8,["modelValue"])]),_:1}),m(t,{label:"是否启用知识库外部嵌入"},{default:r(()=>[m(T,{modelValue:w.advancedControls.enableKbEmbed,"onUpdate:modelValue":a[11]||(a[11]=e=>w.advancedControls.enableKbEmbed=e)},{default:r(()=>[m(S,{value:!0},{default:r(()=>a[34]||(a[34]=[h("开启")])),_:1,__:[34]}),m(S,{value:!1},{default:r(()=>a[35]||(a[35]=[h("关闭")])),_:1,__:[35]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),c("div",p,[m(R,{onClick:A},{default:r(()=>a[36]||(a[36]=[h("恢复默认值")])),_:1,__:[36]}),m(R,{type:"primary",onClick:k},{default:r(()=>a[37]||(a[37]=[h("保存设置")])),_:1,__:[37]})])]),_:1})):i("",!0),y.value?(s(),d(x,{key:1,class:"settings-card",shadow:"hover"},{header:r(()=>a[38]||(a[38]=[c("div",{class:"card-header"},[c("span",null,"此租户超级管理员设置（在平台范围内细化）")],-1)])),default:r(()=>[m(Q,{gutter:16},{default:r(()=>[m(U,{span:12},{default:r(()=>[m(x,{class:"section-card",shadow:"never"},{header:r(()=>a[39]||(a[39]=[c("span",null,"安全与认证",-1)])),default:r(()=>[m(V,{model:B.securityAuth,"label-width":"180px"},{default:r(()=>[m(t,{label:"token有效期（分钟）"},{default:r(()=>[m(l,{modelValue:B.securityAuth.tokenMinutes,"onUpdate:modelValue":a[12]||(a[12]=e=>B.securityAuth.tokenMinutes=e),min:1,max:2e5},null,8,["modelValue"])]),_:1}),m(t,{label:"最大登录失败次数"},{default:r(()=>[m(l,{modelValue:B.securityAuth.maxLoginFailures,"onUpdate:modelValue":a[13]||(a[13]=e=>B.securityAuth.maxLoginFailures=e),min:1,max:100},null,8,["modelValue"])]),_:1}),m(t,{label:"密码强度最低"},{default:r(()=>[m(b,{modelValue:B.securityAuth.passwordStrength,"onUpdate:modelValue":a[14]||(a[14]=e=>B.securityAuth.passwordStrength=e),placeholder:"请选择"},{default:r(()=>[m(u,{label:"低",value:"low"}),m(u,{label:"中",value:"medium"}),m(u,{label:"高",value:"high"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),m(U,{span:12},{default:r(()=>[m(x,{class:"section-card",shadow:"never"},{header:r(()=>a[40]||(a[40]=[c("span",null,"系统行为",-1)])),default:r(()=>[m(V,{model:B.systemBehavior,"label-width":"220px"},{default:r(()=>[m(t,{label:"单个文件上传大小上限（MB）"},{default:r(()=>[m(l,{modelValue:B.systemBehavior.singleFileMaxUploadMB,"onUpdate:modelValue":a[15]||(a[15]=e=>B.systemBehavior.singleFileMaxUploadMB=e),min:1,max:102400},null,8,["modelValue"])]),_:1}),m(t,{label:"日志保留天数"},{default:r(()=>[m(l,{modelValue:B.systemBehavior.logRetentionDays,"onUpdate:modelValue":a[16]||(a[16]=e=>B.systemBehavior.logRetentionDays=e),min:1,max:3650},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),m(U,{span:12},{default:r(()=>[m(x,{class:"section-card",shadow:"never"},{header:r(()=>a[41]||(a[41]=[c("span",null,"租户配额",-1)])),default:r(()=>[m(V,{model:B.tenantQuota,"label-width":"200px"},{default:r(()=>[m(t,{label:"知识库数量限制"},{default:r(()=>[m(l,{modelValue:B.tenantQuota.kbLimit,"onUpdate:modelValue":a[17]||(a[17]=e=>B.tenantQuota.kbLimit=e),min:1,max:1e5},null,8,["modelValue"])]),_:1}),m(t,{label:"用户数量限制"},{default:r(()=>[m(l,{modelValue:B.tenantQuota.userLimit,"onUpdate:modelValue":a[18]||(a[18]=e=>B.tenantQuota.userLimit=e),min:1,max:1e6},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),m(U,{span:12},{default:r(()=>[m(x,{class:"section-card",shadow:"never"},{header:r(()=>a[42]||(a[42]=[c("span",null,"功能开关",-1)])),default:r(()=>[m(V,{model:B.featureToggles,"label-width":"240px"},{default:r(()=>[m(t,{label:"是否允许自主注册"},{default:r(()=>[m(T,{modelValue:B.featureToggles.allowSelfRegister,"onUpdate:modelValue":a[19]||(a[19]=e=>B.featureToggles.allowSelfRegister=e)},{default:r(()=>[m(S,{value:!0},{default:r(()=>a[43]||(a[43]=[h("开启")])),_:1,__:[43]}),m(S,{value:!1},{default:r(()=>a[44]||(a[44]=[h("关闭")])),_:1,__:[44]})]),_:1},8,["modelValue"])]),_:1}),m(t,{label:"用户信息是否可编辑"},{default:r(()=>[m(T,{modelValue:B.featureToggles.userEditable,"onUpdate:modelValue":a[20]||(a[20]=e=>B.featureToggles.userEditable=e)},{default:r(()=>[m(S,{value:!0},{default:r(()=>a[45]||(a[45]=[h("开启")])),_:1,__:[45]}),m(S,{value:!1},{default:r(()=>a[46]||(a[46]=[h("关闭")])),_:1,__:[46]})]),_:1},8,["modelValue"])]),_:1}),m(t,{label:"是否启用知识库外部嵌入"},{default:r(()=>[m(T,{modelValue:B.featureToggles.enableKbEmbed,"onUpdate:modelValue":a[21]||(a[21]=e=>B.featureToggles.enableKbEmbed=e)},{default:r(()=>[m(S,{value:!0},{default:r(()=>a[47]||(a[47]=[h("开启")])),_:1,__:[47]}),m(S,{value:!1},{default:r(()=>a[48]||(a[48]=[h("关闭")])),_:1,__:[48]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),c("div",g,[m(R,{onClick:L},{default:r(()=>a[49]||(a[49]=[h("恢复默认值")])),_:1,__:[49]}),m(R,{type:"primary",onClick:M},{default:r(()=>a[50]||(a[50]=[h("保存设置")])),_:1,__:[50]})])]),_:1})):i("",!0)])}}},[["__scopeId","data-v-ea0abc5c"]]);export{b as default};
